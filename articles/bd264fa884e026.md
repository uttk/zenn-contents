---
title: "TypeScriptã®ã‚¾ãƒƒã¨ã™ã‚‹è©± ~ Zodã®ç´¹ä»‹ ~"
emoji: "ğŸ˜±"
type: "tech"
topics: ["typescript", "zod"]
published: true
---

:::message
**ç¾åœ¨( 2021/09/13 )ã€ã“ã®è¨˜äº‹ã®æƒ…å ±ã¯å¤ããªã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ï¼**
**ãã®ãŸã‚ã€ãªã‚‹ã¹ãã¯å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚**
å‚ç…§: [å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://github.com/colinhacks/zod)
:::

:::message
**ã“ã®è¨˜äº‹ã®å†’é ­ã¨æœ«å°¾ã«ã¯èŒ¶ç•ªãŒå«ã¾ã‚Œã¾ã™ï¼äºˆã‚ã”ç•™æ„ãã ã•ã„ ğŸ™‡â€â™‚ï¸ğŸ™‡â€â™€ï¸**
:::

# ã“ã®è¨˜äº‹ã«ã¤ã„ã¦

å…ˆæ—¥ã€ã€Œ ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦ä¸€ç•ªæ€–ã„ãƒ¢ãƒã¯ä½•ï¼Ÿ ã€ã¨çŸ¥äººã«å°‹ã­ã‚‹ã¨ã€

ã€Œ **å®Ÿã¯ã€TypeScript ãŒä¸€ç•ªæ€–ã„** ã€

ã¨è¨€ã£ã¦ãã¾ã—ãŸã€‚
ãã‚“ãªè¨³ãªã„ã ã‚ã†ã¨æ€ã£ã¦ã„ãŸã®ã§ã™ãŒã€ã©ã†ã‚„ã‚‰çŸ¥äººã¯æœ¬æ°—ã®æ§˜å­ã€‚

ã€Œ TypeScript ãŒå«Œã„ãªã‚‰ã¾ã ã—ã‚‚ã€TypeScript ãŒæ€–ã„ã¨ã¯ã€ã“ã‚Œã¯ãƒŠãƒ‹ã‹ã‚ã‚‹ãª ğŸ¤” ã€

ã¨æ€ã£ãŸç§ã¯ã€TypeScript First ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚ã‚‹ [Zod](https://github.com/colinhacks/zod) ã‚’çŸ¥äººã«ç´¹ä»‹ã—ã¦ã€äº‹ã®çœŸæ„ã‚’ç¢ºã‹ã‚ã‚ˆã†ã¨ã—ãŸã®ã§ã—ãŸã€‚ ~~æ€–ã„ãªã‚‰ã‚‚ã£ã¨æ€–ãŒã‚‰ã›ã¦ã‚„ã‚ã†ã¨æ€ã£ãŸã®ã¯å†…ç·’ ğŸ¤«~~

ã—ã‹ã—ã€çŸ¥äººã«ç´¹ä»‹ã™ã‚‹ã ã‘ã§ã¯å‹¿ä½“ãªã„ã®ã§ã€ä»Šå›ã¯çš†ã•ã‚“ã«çŸ¥è¦‹ã‚’äº¤ãˆãªãŒã‚‰ [Zod](https://github.com/colinhacks/zod) ã®äº‹ã‚’ç´¹ä»‹ã—ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ ğŸ’ª

æ³¨æ„ã¨ã—ã¦ã€ã“ã®è¨˜äº‹ã¯ä»¥ä¸‹ã®ãƒªãƒã‚¸ãƒˆãƒªã® README.md ã‚’å‚è€ƒã«ã—ã¦ã„ã¾ã™ã€‚

https://github.com/colinhacks/zod

ãã®ãŸã‚ã€è¨˜äº‹å†…ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«ã¯ README.md å†…ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å¼•ç”¨ã—ã¦ã„ã‚‹éƒ¨åˆ†ãŒã‚ã‚Šã¾ã™ã®ã§ã€ã”ç†è§£ã„ãŸã ã‘ã¾ã™ã¨å¹¸ã„ã§ã™ ğŸ™

ã§ã¯æ—©é€Ÿã€è§£èª¬ã—ã¦ãã¾ã—ã‚‡ãƒ¼ ğŸ‘¨â€ğŸš€ğŸ‘©â€ğŸš€

# Zod ã«ã¤ã„ã¦

https://github.com/colinhacks/zod

[Zod](https://github.com/colinhacks/zod)ã¨ã¯ã€TypeScript First ãªãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã€[Blitz](https://blitzjs.com/)ã«ã‚‚ä½¿ã‚ã‚Œã¦ã„ã‚‹ä»Š Hot ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚

ç‰¹å¾´ã¨ã—ã¦ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚Šã¾ã™ ğŸ‘‡

#### ç‰¹å¾´

- ä¾å­˜é–¢ä¿‚ã‚¼ãƒ­
- ãƒ–ãƒ©ã‚¦ã‚¶ã¨ Node.js ã§å‹•ä½œã—ã¾ã™( [deno ã«ã‚‚å¯¾å¿œ ğŸ¦•](https://github.com/colinhacks/zod/issues/309) )
- ã‚µã‚¤ã‚ºãŒå°ã•ã„: 8kb minified + zipped
- ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«
- ç°¡æ½”ã§é€£é–å¯èƒ½ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- Functional approach: [parse, don't validate](https://lexi-lambda.github.io/blog/2019/11/05/parse-don-t-validate/)
- ãƒ—ãƒ¬ãƒ¼ãƒ³ JavaScript ã§ã‚‚å‹•ä½œã—ã¾ã™ï¼TypeScript ã‚’ä½¿ç”¨ã—ãªãã¦ã‚‚å¤§ä¸ˆå¤«ï¼

# åŸºæœ¬çš„ãªä½¿ã„æ–¹

å…ˆãšã¯åŸºæœ¬çš„ãªä½¿ã„æ–¹ã‹ã‚‰è¦‹ã¦è¡Œãã¾ã—ã‚‡ã† ğŸ‘€

```ts:ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œã£ã¦æ¤œè¨¼ã™ã‚‹ä¾‹
import * as z from "zod";

// ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆ
const schema = z.object({
  str: z.string(),
})

// å€¤ã‚’æ¤œè¨¼ã™ã‚‹
try {

  const ok = schema.parse({ str: "" });
  const throw_error = schema.parse({ str: 0 });

} catch(err) { // æ¤œè¨¼ã«å¤±æ•—ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ãŒæŠ•ã’ã‚‰ã‚Œã¾ã™ã€‚

  console.error(err);
  /*
    // ã‚¨ãƒ©ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å†…å®¹ğŸ‘‡
    [
      {
        "code": "invalid_type", // ã‚¨ãƒ©ãƒ¼ã‚¿ã‚¤ãƒ—
        "expected": "string",   // æœŸå¾…ã—ãŸå‹
        "received": "number",   // å—ã‘å–ã£ãŸå€¤ã®å‹
        "path": [ "str" ],      // ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¸ã®ãƒ‘ã‚¹
        "message": "Expected string, received number" // ã‚¨ãƒ©ãƒ¼å†…å®¹
      }
    ]
  */

}
```

ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€`{ str: string }`ã®å€¤ã‚’æœŸå¾…ã™ã‚‹`schema`ã‚’å®šç¾©ã—ã€ãã®`schema`ãŒæŒã¤`parse()`ã‚’å®Ÿè¡Œã™ã‚‹äº‹ã§ã€å¼•æ•°ã«æ¸¡ã•ã‚ŒãŸå€¤ãŒæœŸå¾…ã™ã‚‹å‹ã‹ã©ã†ã‹ã‚’æ¤œè¨¼ã—ã¦ã„ã¾ã™ã€‚

ã“ã®æ™‚ã€`schema.parse()`ã®å‹•ä½œã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

- âœ… æ¤œè¨¼æˆåŠŸæ™‚ -> æœŸå¾…ã—ãŸå‹ã®å€¤ã‚’è¿”ã—ã¾ã™
- âŒ æ¤œè¨¼å¤±æ•—æ™‚ -> æ¤œè¨¼ã‚¨ãƒ©ãƒ¼ã®å†…å®¹ã‚’æŒã£ãŸ ZodError ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æŠ•ã’ã¾ã™

`.parse()`ã¯ã€æ¤œè¨¼å¤±æ•—æ™‚ã«ã¯ Error ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æŠ•ã’ã‚‹ãŸã‚ [try...catch æ–‡](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/try...catch) ã‚’ä½¿ã†å¿…è¦ãŒã‚ã‚Šã¾ã™ãŒã€[Error ã‚’æŠ•ã’ãªã„æ¤œè¨¼æ–¹æ³•](<#.safeparse()>)ã‚‚ã‚ã‚Šã¾ã™ã®ã§ã€çŠ¶æ³ã«ã‚ˆã£ã¦ä½¿ã„åˆ†ã‘ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

ã¾ãŸæ³¨æ„ç‚¹ã¨ã—ã¦ã¯ã€æ¤œè¨¼å€¤ãŒãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–å‹ã§ã¯ãªã„æ™‚ã€æ¤œè¨¼çµæœã¯å¼•æ•°ã®å€¤ã¨ã¯é•ã†å€¤ã«ãªã‚Šã¾ã™ã€‚ãã®ãŸã‚ã€ä»¥ä¸‹ã®å‡¦ç†ã¯å¸¸ã«`false`ã‚’è¿”ã™ã“ã¨ã«ãªã‚Šã¾ã™ ğŸ‘‡

```ts:schemaã¯ä¸Šè¨˜ã®ãƒ¢ãƒã‚’ä½¿ç”¨
const value = { str: "test" }
const value2 = schema.parse(value) // æ¤œè¨¼ãŒæˆåŠŸã—ã€çµæœã‚’sameValueã«å…¥ã‚Œã‚‹

// å¼•æ•°ã®å€¤ã‚’è¿”ã™ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã®ã§ã€ä»¥ä¸‹ã®å‡¦ç†ã¯falseã«ãªã‚Šã¾ã™ğŸ™…â€â™‚ï¸ğŸ™…â€â™€ï¸
console.log( value === value2 ); // ==> false
```

ä¸Šè¨˜ã®æŒ™å‹•ãŒç‰¹ã«å•é¡Œã¨ãªã‚‹äº‹ã¯å°‘ãªã„ã¨æ€ã„ã¾ã™ãŒã€çŸ¥è¦‹ã¨ã—ã¦å…±æœ‰ã—ã¦ãŠãã¾ã™ ğŸ¦´

## å‹ã®ç”Ÿæˆ

æ¬¡ã«æœ€å¤§ã®ç‰¹å¾´ã§ã‚ã‚‹ã€ç”Ÿæˆã—ãŸã‚¹ã‚­ãƒ¼ãƒã‹ã‚‰ TypeScript ã®å‹ã‚’ç”Ÿæˆã™ã‚‹æ©Ÿèƒ½ã‚’ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ ğŸ°

```ts:ã‚¹ã‚­ãƒ¼ãƒã‹ã‚‰å‹ã‚’ç”Ÿæˆã™ã‚‹ã‚µãƒ³ãƒ—ãƒ«
import * as z from "zod";

const schema = z.object({
  str: z.string(),
  num: z.number()
})

// ã‚¹ã‚­ãƒ¼ãƒã‹ã‚‰å‹ã‚’ç”Ÿæˆï¼
type SchemaType = z.infer<typeof schema>;
/*
  {
    str: string
    num: string
  }
*/
```

ä¸Šè¨˜ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ä¸­ã«ã‚ã‚‹`z.infer<>`ã®å‹å¼•æ•°ã«ã€ã‚¹ã‚­ãƒ¼ãƒã®å‹( typeof ã§å¤‰æ›ã—ãŸå‹ )ã‚’æ¸¡ã™ã“ã¨ã§ã€ã‚¹ã‚­ãƒ¼ãƒãŒæœŸå¾…ã—ã¦ã„ã‚‹å€¤ã®å‹ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

ã“ã®æ©Ÿèƒ½ãŒå‡„ã„æ‰€ã¯ã€ä»Šã¾ã§å‹å®šç¾©ã‚’ã—ã¦ã‹ã‚‰å®Ÿè£…ã™ã‚‹æ‰€ã‚’ã€**ã»ã¨ã‚“ã©å®Ÿè£…ã®ã¿ã®è¨˜è¿°ã§æ¸ˆã‚€**ç‚¹ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã£ã¦ã€å‹å®šç¾©ã¨å®Ÿè£…ã¨ã®é½Ÿé½¬ã‚’ç„¡ãã™äº‹ãŒå‡ºæ¥ã‚‹ã†ãˆã«è¨˜è¿°é‡ã‚’æ¸›ã‚‰ã™ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

å‹¿è«–ã€å‹ç”Ÿæˆã§ãã‚‹ãƒ¢ãƒã¯ string å‹ã‚„ number å‹ã ã‘ã§ãªãä»–ã®å‹ã‚‚ç”Ÿæˆå¯èƒ½ã§ã™ã€‚
ãã‚Œã‚‰ã®å‹ã®è©³ç´°ã¯å¾Œè¿°ã—ã¾ã™ãŒã€ã»ã¨ã‚“ã©ã®å‹ã‚’ç”Ÿæˆã§ãã‚‹ã®ã§ã€ç›¸å½“ç‰¹æ®Šãªè¦ä»¶ã§ã¯ãªã„é™ã‚Šå‹ã‚’ç”Ÿæˆã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚

#### ã¾ã¨ã‚

ã•ã¦ã€ã“ã‚Œã§åŸºæœ¬çš„ãªä½¿ã„æ–¹ã®è§£èª¬ã¯çµ‚äº†ã§ã™ã€‚

å°‘ã—çŸ­ã„è§£èª¬ã«æ€ãˆã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€åŸºæœ¬çš„ã«ã¯ã‚¹ã‚­ãƒ¼ãƒä½œã£ã¦æ¤œè¨¼ã™ã‚‹ã ã‘ãªã®ã§ã€ä¸Šè¨˜ã®ä½¿ã„æ–¹ã‚’è¦šãˆã¦ãŠã‘ã° Zod ã‚’æ‰±ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ä½•ãªã‚‰ã€VSCode ã®å…¥åŠ›è£œå®Œã‚’æ´»ç”¨ã™ã‚Œã°ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã¾ãšã¨ã‚‚æ›¸ã‘ã¦ã—ã¾ã†ãã‚‰ã„ã§ã™ã€‚ãã®ãã‚‰ã„ã‚·ãƒ³ãƒ—ãƒ«ãª API è¨­è¨ˆã‚‚ Zod ã®é­…åŠ›ã§ã™ã­ âœ¨

æ¬¡ã¯ã€ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã™ã‚‹ãŸã‚ã®é–¢æ•°(ä»¥å¾Œã€ZodType)ã«ã¤ã„ã¦è§£èª¬ã—ã¦ã„ãã¾ã™ ğŸŒ­

# String å‹

String å‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã™ã‚‹ã«ã¯`z.string()`ã‚’ä½¿ã£ã¦å®šç¾©ã—ã¾ã™ã€‚

String å‹ã®ã‚¹ã‚­ãƒ¼ãƒã«ã¯æ§˜ã€…ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ãã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†äº‹ã§æŸ”è»Ÿãªå®šç¾©ãŒå¯èƒ½ã¨ãªã£ã¦ã„ã¾ã™ ğŸ‘‡

```ts:æ§˜ã€…ãªStringå‹ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©
import * as z from "zod";

z.string();              // å˜ç´”ãªæ–‡å­—åˆ—
z.string().min(5);       // 5æ–‡å­—ä»¥ä¸Šã®æ–‡å­—åˆ—
z.string().max(5);       // 5æ–‡å­—ä»¥ä¸‹ã®æ–‡å­—åˆ—
z.string().length(5);    // å›ºå®šå¹…ã®æ–‡å­—åˆ—
z.string().email();      // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹æ–‡å­—åˆ—
z.string().url();        // URLæ–‡å­—åˆ—
z.string().uuid();       // UUIDæ–‡å­—åˆ—
z.string().regex(regex); // æ­£è¦è¡¨ç¾ã«ãƒãƒƒãƒã™ã‚‹æ–‡å­—åˆ—
z.string().nonempty();   // ç©ºæ–‡å­—åˆ—ä»¥å¤–ã®æ–‡å­—åˆ—
```

ä¸Šè¨˜ã® `emailãƒ»urlãƒ»uuid` ãªã©ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã€[validator.js](https://github.com/validatorjs/validator.js)ã‚’ç”¨ã„ã¦æ¤œè¨¼ã—ã¾ã™ã®ã§ã€æ‰±ã†éš›ã¯[validator.js](https://github.com/validatorjs/validator.js)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

# Number å‹

Number å‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã™ã‚‹ã«ã¯`z.number()`ã‚’ä½¿ã£ã¦å®šç¾©ã—ã¾ã™ã€‚

Number å‹ã«ã‚‚ä»¥ä¸‹ã®ä¾¿åˆ©ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ ğŸ‘‡

```ts:æ§˜ã€…ãªNumberå‹ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©
import * as z from "zod";

z.number();               // å˜ç´”ãªæ•°å€¤( NaNã¨BigIntå‹ã¯å«ã¾ãªã„ )
z.number().min(5);        // 5ä»¥ä¸Šã®æ•°å€¤( >= 5 )
z.number().max(5);        // 5ä»¥ä¸‹ã®æ•°å€¤( <= 5 )
z.number().int();         // æ•´æ•°å‹ã®æ•°å€¤
z.number().positive();    // 0ã‚ˆã‚Šã‚‚å¤§ãã„æ•°å€¤( > 0 )
z.number().nonnegative(); // 0ä»¥ä¸Šã®æ•°å€¤( >= 0 )
z.number().negative();    // 0ã‚ˆã‚Šå°ã•ã„æ•°å€¤( < 0 )
z.number().nonpositive(); // 0ä»¥ä¸‹ã®æ•°å€¤( <= 0 )
```

æ³¨æ„ç‚¹ã¨ã—ã¦ã¯ã€NaN ã¨ BigInt å‹ã‚’å«ã¾ãªã„äº‹ãã‚‰ã„ã§ã—ã‚‡ã†ã‹ã€‚

BigInt å‹ã¯åˆ¥ã® ZodType ã¨ã—ã¦ç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã®ã§å¤§ä¸ˆå¤«ã‹ã¨æ€ã„ã¾ã™ãŒã€`NaN`ã«ã¤ã„ã¦ã¯ ZodType ãŒç”¨æ„ã•ã‚Œã¦ã„ãªã„ã®ã§ã€è‡ªä½œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ ğŸ‘‡

```ts:NaNã‚’æ¤œçŸ¥ã™ã‚‹ã‚¹ã‚­ãƒ¼ãƒã‚’è‡ªä½œã™ã‚‹
// NaNã‚’æ¤œçŸ¥ã™ã‚‹ã‚¹ã‚­ãƒ¼ãƒ( ZodSchemaã‚’ç”¨ã„ã¦numberå‹ã«ã™ã‚‹ )
const NaNSchema: z.ZodSchema<number> = z.any().refine(Number.isNaN)

// NaNã‚’è¨±å®¹ã™ã‚‹æ•°å€¤ã‚¹ã‚­ãƒ¼ãƒ
const NumOrNaNSchema = z.number().or(NaNSchema)

// å‹ç”Ÿæˆ( NaNSchemaã‚’ZodSchemaã§numberå‹ã«ã—ã¦ãªã„ã¨anyã«ãªã‚‹ã®ã§æ³¨æ„ï¼ )
type SchemaType = z.infer<typeof NumOrNaNSchema>;
// number
```

NaN ã‚’è¨±å®¹ã™ã‚‹æ™‚ãªã‚“ã¦ã‚ã‚‹ã®ã‹ã¯ç”šã ç–‘å•ã§ã™ãŒã€IT æ¥­ç•Œã¯ç¨€ãŒã‚ˆãã‚ã‚‹æ¥­ç•Œãªã®ã§ä¸€å¿œå…±æœ‰ã—ã¦ãŠãã¾ã™ ğŸ«

:::message
[NaN ã®åˆ¤å®šã«ã¯è‰²ã€…ã¨ç½ ãŒã‚ã‚Šã¾ã™](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/isNaN)ã®ã§ã€æ³¨æ„ã—ã¦ãã ã•ã„ï¼
:::

# Boolean å‹

Boolean å‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã™ã‚‹ã«ã¯`z.boolean()`ã‚’ä½¿ã£ã¦å®šç¾©ã—ã¾ã™ã€‚

Boolean å‹ã«ã¯å›ºæœ‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãªã©ã¯ç„¡ã„ã®ã§ã€ç¾çŠ¶ã§ã¯ç°¡å˜ãªã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã™ã‚‹ã®ã¿ã¨ãªã£ã¦ã„ã¾ã™ ğŸ‘‡

```ts:Booleanå‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©
import * as z from "zod";

z.boolean(); // å˜ç´”ãªBooleanå‹ã®ã‚¹ã‚­ãƒ¼ãƒ
```

# BigInt å‹

BigInt å‹ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã™ã‚‹ã«ã¯`z.bigint()`ã‚’ä½¿ã£ã¦å®šç¾©ã—ã¾ã™ã€‚
BigInt ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã® MDN ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/BigInt

ã¾ãŸã€ã“ã® ZodType ã«ã¯ Number å‹ã®ã‚ˆã†ãªç‰¹åˆ¥ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
ãã®ãŸã‚ã€å‡ºæ¥ã‚‹ã“ã¨ã¯å˜ç´”ãªå‹ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã™ã‚‹äº‹ã®ã¿ã¨ãªã£ã¦ã„ã¾ã™ ğŸ‘‡

```ts:BigIntå‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©
import * as z from "zod";

z.bigint(); // å˜ç´”ãªBigIntå‹ã®ã‚¹ã‚­ãƒ¼ãƒ
```

:::message
BigInt å‹ã¯ã€æœ€è¿‘ï¼Ÿã§ããŸå‹ãªã®ã§ä½¿ã†éš›ã«ã¯æ³¨æ„ã—ã¦ãã ã•ã„ï¼
ç‰¹ã« JSON æ–‡å­—åˆ—ã«å¤‰æ›ã™ã‚‹éš›ã¯ã€`toJSON()`ã‚’[è‡ªå‰ã§å®Ÿè£…ã™ã‚‹](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/BigInt#use_within_json)å¿…è¦ãŒã‚ã‚Šã¾ã™( 2021/05 æ™‚ç‚¹ )ã€‚
:::

# Date å‹

Date å‹ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã™ã‚‹ã«ã¯`z.date()`ã‚’ä½¿ã£ã¦å®šç¾©ã—ã¾ã™ã€‚

Date å‹ã«ã¯å›ºæœ‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãªã©ã¯ç„¡ã„ã®ã§ã€ç¾çŠ¶ã§ã¯ç°¡å˜ãªã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã™ã‚‹ã®ã¿ã¨ãªã£ã¦ã„ã¾ã™ ğŸ‘‡

```ts:Dateå‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©
import * as z from "zod";

z.date(); // å˜ç´”ãªDateå‹ã®ã‚¹ã‚­ãƒ¼ãƒ
```

# Undefined å‹

`undefined`ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã™ã‚‹ã«ã¯`z.undefined()`ã‚’ä½¿ã£ã¦å®šç¾©ã—ã¾ã™ã€‚

```ts:undefinedã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©
import * as z from "zod";

z.undefined(); // undefined
```

ã¾ãŸ`optional()` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç”¨ã„ã‚‹äº‹ã§ã€ä»–ã® ZodType ã«ä»˜éšã•ã›ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

```ts:Stringå‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’optionalã«ã™ã‚‹
z.string().optional(); // string | undefined
```

# Null å‹

`null`ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã™ã‚‹ã«ã¯`z.null()`ã‚’ä½¿ã£ã¦å®šç¾©ã—ã¾ã™ã€‚

```ts:nullã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©
import * as z from "zod";

z.null(); // null
```

ã¾ãŸ`nullable()`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç”¨ã„ã‚‹äº‹ã§ã€ä»–ã® ZodType ã«ä»˜éšã•ã›ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

```ts:Stringå‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’nullableã«ã™ã‚‹
z.string().nullable(); // string | null
```

# Void å‹

void å‹ã¯ã€`null | undefined`ã¨ãªã‚‹ã‚ˆã†ãªå‹ã¨ãªã£ã¦ã„ã¾ã™ã€‚
void å‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆã™ã‚‹ã«ã¯`z.void()`ã‚’ä½¿ã£ã¦å®šç¾©ã—ã¾ã™ã€‚

```ts:voidå‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©
import * as z from "zod";

z.void(); // null | undefined
```

åŸºæœ¬çš„ã«[Function å‹](#functionå‹)ã‚’å®šç¾©ã™ã‚‹éš›ã«ä½¿ç”¨ã™ã‚‹ã®ã§ã€å˜ä½“ã§ã®ä½¿ç”¨é »åº¦ã¯å°‘ãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚

# Any å‹

`any`ã®ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆã™ã‚‹ã«ã¯`z.any()`ã‚’ä½¿ã£ã¦å®šç¾©ã—ã¾ã™ã€‚

```ts:anyã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©
import * as z from "zod";

z.any();   // any

z.any().parse("any");   // âœ… ã©ã®å€¤ã§ã‚‚æ¤œè¨¼ã«æˆåŠŸã—ã¾ã™
```

# Never å‹

`never`ã®ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆã™ã‚‹ã«ã¯`z.never()`ã‚’ä½¿ã£ã¦å®šç¾©ã—ã¾ã™ã€‚

```ts:neverã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©
import * as z from "zod";

z.never(); // never

z.never().parse("any"); // âŒ ã©ã®å€¤ã‚‚æ¤œè¨¼ã«å¤±æ•—ã—ã¾ã™
```

# Literal å‹

Literal å‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆã™ã‚‹ã«ã¯`z.literal()`ã‚’ä½¿ã£ã¦å®šç¾©ã—ã¾ã™ãŒã€å®Ÿè¡Œã™ã‚‹éš›ã¯å¼•æ•°ã«æ¤œè¨¼ã—ãŸã„ã‚’ Literal å‹ã®å€¤ã‚’æ¸¡ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ ğŸ‘‡

```ts:Literalå‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©
import * as z from "zod";

z.literal(1);         // 1 ã®ã‚¹ã‚­ãƒ¼ãƒ
z.literal("hoge");    // "hoge" ã®ã‚¹ã‚­ãƒ¼ãƒ
z.literal(10n);       // 10n ã®ã‚¹ã‚­ãƒ¼ãƒ( 10nã¯BigIntå‹ã®ã“ã¨ )
z.literal(true);      // true ã®ã‚¹ã‚­ãƒ¼ãƒ
z.literal(undefined); // undefined ã®ã‚¹ã‚­ãƒ¼ãƒ
z.literal(null);      // null ã®ã‚¹ã‚­ãƒ¼ãƒ
```

:::message
æ³¨æ„ç‚¹ã¨ã—ã¦ã€å¼•æ•°ã«æ¸¡ã›ã‚‹å€¤ã¯ `string | number | bigint | boolean | null | undefined` ã®ã¿ã¨ãªã£ã¦ã„ã¾ã™ã€‚
:::

# Array å‹

Array å‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆã™ã‚‹ã«ã¯`z.array()`ã‚’ä½¿ã£ã¦å®šç¾©ã—ã¾ã™ãŒã€å®Ÿè¡Œã™ã‚‹éš›ã¯å¼•æ•°ã« ZodType ã‚’æ¸¡ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

Array å‹ã«ã‚‚ä¾¿åˆ©ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã™ ğŸ‘‡

```ts
import * as z from "zod";

z.array(z.string()); // string[]
z.array(z.string()).min(5); // 5ä»¥ä¸Šã®è¦ç´ ã‚’æŒã¤string[]
z.array(z.string()).max(5); // 5ä»¥ä¸‹ã®è¦ç´ ã‚’æŒã¤string[]
z.array(z.string()).length(5); // 5è¦ç´ ã‚’æŒã¤string[]
z.array(z.string()).nonempty(); // ç©ºé…åˆ—ã§ãªã„string[]
```

ã¾ãŸã€`array()`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç”¨ã„ã‚‹äº‹ã§ã€ä»–ã® ZodType ã«ä»˜éšã•ã›ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

```ts
z.string().array(); // string[]
z.string().optional().array(); // (string | undefined)[]
z.string().array().optional(); // string[] | undefined
```

:::message
æ³¨æ„ç‚¹ã¨ã—ã¦ã€`.array()`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã£ãŸå ´åˆã¯**å®Ÿè¡Œé †ã§æœŸå¾…ã™ã‚‹å‹ãŒå¤‰ã‚ã‚Šã¾ã™ã€‚**
ãã®ãŸã‚ã€ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒçµ¡ã‚€ã‚ˆã†ãªã‚‰`z.array()`ã‚’ä½¿ã£ãŸæ–¹ãŒè‰¯ã„ã¨æ€ã„ã¾ã™ã€‚
:::

# Object å‹

Object å‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆã™ã‚‹ã«ã¯`z.object()`ã‚’ä½¿ã£ã¦å®šç¾©ã—ã¾ã™ãŒã€å®Ÿè¡Œã™ã‚‹éš›ã¯å¼•æ•°ã« ZodType ã‚’å«ã‚“ã ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ ğŸ‘‡

```ts
import * as z from "zod";

// { name: string; age:number; } ã®ã‚¹ã‚­ãƒ¼ãƒ
z.object({
  name: z.string(),
  age: z.number(),
});
```

ãã—ã¦ã€ã“ã® Object å‹ã® ZodType ã«ã¯ã€ä»–ã® ZodType ã¨ã¯å°‘ã—é•ã£ãŸã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒæ²¢å±±ã‚ã‚Šã¾ã™ã®ã§ã€ãã‚Œã‚‰ã‚’ä¸€ã¤ä¸€ã¤è§£èª¬ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚

## .shape

`.shape`ã‚’ç”¨ã„ã‚‹äº‹ã§ã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«è¨­å®šã—ãŸã‚¹ã‚­ãƒ¼ãƒã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

```ts:.shapeã®æŒ™å‹•ã®ç¢ºèª
const schema = z.object({ str: z.string(), num: z.number() });

const str = schema.shape.str; // stringã®ã‚¹ã‚­ãƒ¼ãƒ

const num = schema.shape.num; // numberã®ã‚¹ã‚­ãƒ¼ãƒ
```

#### ä½¿ã„ã©ã“ã‚

ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚Šã€Object å†…éƒ¨ã«ã‚¹ã‚­ãƒ¼ãƒã‚’ã¾ã¨ã‚æ˜“ããªã‚Šã¾ã™ã€‚
ä»¥ä¸‹ã«ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚

```ts:shapeã®æ´»ç”¨ä¾‹
const UserSchema = z.object({
  name: z.string().max(50),
  age: z.number().max(100),
});

const UserName = UserSchema.shape.name;
const UserAge = UserSchema.shape.age;
```

ä¸Šè¨˜ã®ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã€`UserSchema`ã‚’å¤‰æ›´ã™ã‚‹ã ã‘ã§`UserName`ãƒ»`UserAge`ä¸¡æ–¹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã£ã¦ã€ã‚ã–ã‚ã–`UserName`ãƒ»`UserAge`ã‚’ç®¡ç†ã›ãšã¨ã‚‚ã€`UserSchema`ã¨ã®æ•´åˆæ€§ã‚’é«˜ã‚ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã®ã§éå¸¸ã«ä¾¿åˆ©ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ãªã£ã¦ã„ã¾ã™ã€‚

## .extend()

`.extend()`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†äº‹ã§ã€Object ã‚¹ã‚­ãƒ¼ãƒã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä¸Šæ›¸ãã—ãªãŒã‚‰ã€æ–°ã—ã„ Object ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

```ts:.extend()ã®æŒ™å‹•ã®ç¢ºèª
const UserSchema = z.object({
  id: z.number(),
  name: z.string().max(50),
  age: z.number().max(100),
});

// UserSchemaã‹ã‚‰ç®¡ç†è€…ã®ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆã™ã‚‹
const AdminSchema = UserSchema.extend({
  id: z.string(),       // æ—¢å­˜ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä¸Šæ›¸ã
  isAdmin: z.boolean(), // æ–°è¦ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¿½åŠ 
});

type UserType = z.infer<typeof UserSchema>;
/*
  {
    id: number;
    name: string;
    age: number;
  }
*/

type AdminType = z.infer<typeof AdminSchema>;
/*
  {
    id: string;       // number => stringã«å¤‰åŒ–ã—ã¦ã‚‹
    name: string;
    age: number;
    isAdmin: boolean; // æ–°ã—ãè¿½åŠ ã•ã‚Œã¦ã„ã‚‹
  }
*/
```

æ³¨æ„ç‚¹ã¨ã—ã¦ã¯ã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒè¢«ã£ã¦ã„ã‚‹å ´åˆã¯ä¸Šæ›¸ãã•ã‚Œã¦ã—ã¾ã„ã¾ã™ã®ã§ã€é–“é•ã£ã¦ä¸Šæ›¸ãã—ã¦ã—ã¾ã‚ãªã„ã‚ˆã†æ³¨æ„ã—ã¾ã—ã‚‡ã†ã€‚ã¾ãŸã€å¼•æ•°ã«ã¯[`.shape`ã‚ªãƒ—ã‚·ãƒ§ãƒ³](#.shape)ã®å€¤ã‚‚æ¸¡ã›ã¾ã™ã®ã§ã€ä»¥ä¸‹ã®æ–¹æ³•ã§ã‚‚æ›¸ãã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

```ts:.shapeã‚’ä½¿ã£ã¦extendã™ã‚‹
const HelloSchema = AnySchema.extend( WorldSchema.shape );
```

#### ä½¿ã„ã©ã“ã‚

ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã€ä¸Šè¨˜ã®ä¾‹ã§ã‚‚åˆ†ã‹ã‚‹é€šã‚Šã€ä¼¼ãŸã‚ˆã†ãªæ§‹é€ ã‚’æŒã£ãŸã‚¹ã‚­ãƒ¼ãƒã‚’ä½œã‚‹éš›ã«å¤§å¤‰ä¾¿åˆ©ã§ã™ã€‚`createdAt`ãƒ»`updatedAt`ãªã©ã®ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå…±é€šã—ã¦æŒã£ã¦ã„ã‚‹è¦ç´ ãªã©ã¯ã€ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§å®šç¾©ã™ã‚‹äº‹ã‚’ã‚ªã‚¹ã‚¹ãƒ¡ã—ã¾ã™ã€‚

```ts:å…±é€šã®æ§‹é€ ã«.extend()ã‚’ä½¿ã†ä¾‹
const CommonSchema = z.object({
  createdAt: z.date(),
  updatedAt: z.date(),
  deletedAt: z.date().optional(),
})

const UserSchema = CommonSchema.extend({/* -- çœç•¥ -- */});
const TaskSchema = CommonSchema.extend({/* -- çœç•¥ -- */});
```

## .merge()

`.merge()`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†äº‹ã§ã€äºŒã¤ã® Object ã‚¹ã‚­ãƒ¼ãƒã‹ã‚‰ä¸€ã¤ã® Object ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

```ts:.merge()ã®æŒ™å‹•ã®ç¢ºèª
const HasIdSchema = z.object({ id: z.number() });
const BaseUserSchema = z.object({ id: z.string(), name: z.string() });

// HasIdSchemaã¨BaseUserSchemaã‹ã‚‰ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆ
const UserSchema = BaseUserSchema.merge(HasIdSchema);

type UserType = z.infer<typeof UserSchema>;
/*
  {
    id: number;   // ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯å¼•æ•°ã«æ¸¡ã•ã‚ŒãŸæ–¹ãŒå„ªå…ˆã•ã‚Œã¾ã™
    name: string;
  }
*/
```

æ³¨æ„ç‚¹ã¨ã—ã¦ã€å¼•æ•°ã«ã¯ Object ã‚¹ã‚­ãƒ¼ãƒã—ã‹æ¸¡ã›ã¾ã›ã‚“ã€‚ã¾ãŸè¢«ã£ã¦ã„ã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒã‚ã£ãŸå ´åˆã¯ã€å¼•æ•°ã«æ¸¡ã•ã‚ŒãŸ Object ã‚¹ã‚­ãƒ¼ãƒã®æ–¹ãŒå„ªå…ˆã•ã‚Œã¾ã™ã€‚

#### ä½¿ã„ã©ã“ã‚

`.extend()`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ä¼¼ã¦ã„ã¾ã™ãŒã€å¼•æ•°ã«æ¸¡ã•ã‚ŒãŸ Object ã‚¹ã‚­ãƒ¼ãƒã® unknownKeys ãƒãƒªã‚·ãƒ¼( [strip](<#.strip()>)/[strict](<#.strict()>)/[passthrough](<#.passthrough()>) )ã‚’å¼•ãç¶™ãç‚¹ãŒé•ã„ã¾ã™ã€‚

[`.strict()`ã‚ªãƒ—ã‚·ãƒ§ãƒ³](#.strict)ã‚’ç”¨ã„ãŸå ´åˆã‚’è¦‹ã¦ã¿ã¾ã™ ğŸ‘‡

```ts:.merge()ã®æ´»ç”¨ä¾‹
const A = z.object({ str: z.string() });

// æ¤œè¨¼æ™‚ã«ä½™è¨ˆãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒã‚ã£ãŸå ´åˆã¯ã€ã‚¨ãƒ©ãƒ¼ã‚’æŠ•ã’ã‚‹ã‚ˆã†ã«ã™ã‚‹
const B = z.object({ num: z.number() }).strict();

// è¦ã‚‰ãªã„å€¤ã‚’å«ã‚“ã ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
const value = { str: "", num: 0, hoge: "è¦ã‚‰ãªã„å€¤" };

A.extend( B.shape ).parse( value ); // âœ…æ¤œè¨¼ãŒé€šã‚‹
A.merge( B ).parse( value );        // âŒ.strict()ã«ã‚ˆã£ã¦ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹
```

ä¸Šè¨˜ã®æŒ™å‹•ã‚ˆã‚Šã€ã‚¹ã‚­ãƒ¼ãƒã®æ¡ä»¶ã‚’é‡è¦è¦–ã—ã¦ã„ã‚‹æ‰€ã§ã¯`.merge()`ã‚’ä½¿ã„ã€ãã†ã§ç„¡ã„æ‰€ã§ã¯`.extend()`ã‚’ä½¿ã†ã¨ã„ã£ãŸä½¿ã„åˆ†ã‘ã‚’ã—ãŸã‚‰ã„ã„ã¨æ€ã„ã¾ã™ã€‚

ç­†è€…çš„ã«ã¯`.extend()`ã§ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œã£ã¦ã€ãã®ã‚¹ã‚­ãƒ¼ãƒã« unknownKeys ãƒãƒªã‚·ãƒ¼ã‚’è¨­å®šã™ã‚‹æ–¹ãŒåˆ†ã‹ã‚Šã‚„ã™ã„ã¨æ€ã£ã¦ã„ã¾ã™ã€‚~~å®Ÿã¯`.merge()`ä½¿ã£ãŸã“ã¨ãªã„ãªã‚“ã¦è¨€ãˆ n...~~

## .pick()

`.pick()`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†äº‹ã§ã€Object ã‚¹ã‚­ãƒ¼ãƒã‹ã‚‰ç‰¹å®šã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ã¿ã‚’å–ã£ã¦ãã¦ã€ä¸€ã¤ã® Object ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

```ts:.pick()ã®æŒ™å‹•ã®ç¢ºèª
const UserSchema = z.object({
  id: z.number(),
  name: z.string(),
  task: z.object({
    title: z.string()
  })
});

// idã¨nameã ã‘ã‚’å–ã£ã¦ãã¦Objectã‚¹ã‚­ãƒ¼ãƒã‚’ä½œã‚‹
const BasicUserSchema = UserSchema.pick({ id: true, name: true })

type BasicUserType = z.infer<typeof BasicUserSchema>;
/*
  {
    id: number;
    name: string;
  }
*/
```

#### ä½¿ã„ã©ã“ã‚

[redux](https://redux.js.org/)ãªã©ã®ãƒ‡ãƒ¼ã‚¿ãŒä¸€æšå²©ã¨ãªã£ã¦ã„ã‚‹ã‚ˆã†ãªå ´åˆã¯ã€ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æ´»ç”¨ã™ã‚‹äº‹ã§æŸ”è»Ÿã«ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã§ãã¾ã™ã€‚

å…·ä½“çš„ãªæ‰€ã§è¨€ã†ã¨ã€ãƒ•ã‚©ãƒ¼ãƒ ã®çŠ¶æ…‹ç®¡ç†ã§ã¯ä¸€æšå²©ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿æ§‹é€ ã«ãªã£ã¦ã„ã‚‹ã“ã¨ãŒå¤šã„ã®ã§ã€ãã®ã‚ˆã†ãªå ´åˆã«ä½¿ã„ã‚„ã™ã„ã¨æ€ã„ã¾ã™ ğŸ‘‡

```ts
const FormValuesSchemas = z.object({
  name: z.string(),
  age: z.nubmer(),
  tasks: z.string().array(),
});

// ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’æ‰±ã†ã‚¹ã‚­ãƒ¼ãƒ
const UserSchema = RootStoreSchemas.pick({ name: true, age: true });

// ã‚¿ã‚¹ã‚¯æƒ…å ±ã‚’æ‰±ã†ã‚¹ã‚­ãƒ¼ãƒ
const TaskSchema = RootStoreSchemas.pick({ tasks: true });
```

## .omit()

`.omit()`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†äº‹ã§ã€Object ã‚¹ã‚­ãƒ¼ãƒã‹ã‚‰ç‰¹å®šã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’é™¤å¤–ã—ã¦ã€ä¸€ã¤ã® Object ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

```ts:.omit()ã®æŒ™å‹•ã®ç¢ºèª
const UserSchema = z.object({
  id: z.number(),
  name: z.string(),
  tasks: z.string().array(),
});

// tasksã‚’é™¤å¤–ã—ã¦Objectã‚¹ã‚­ãƒ¼ãƒã‚’ä½œã‚‹
const BasicUserSchema = UserSchema.omit({ tasks: true })

type BasicUserType = z.infer<typeof BasicUserSchema>;
/*
  {
    id: number;
    name: string;
  }
*/
```

#### ä½¿ã„ã©ã“ã‚

ã»ã¨ã‚“ã©[`.pick()`](<#.pick()>)ã¨åŒã˜ã§ã™ã€‚ä½¿ã„ã‚„ã™ã„æ–¹ã‚’ä½¿ãˆã°ã„ã„ã¨æ€ã„ã¾ã™ ğŸ‘‡

```ts:.omit()ã®æ´»ç”¨ä¾‹
const FormValuesSchemas = z.object({
  name: z.string(),
  age: z.nubmer(),
  tasks: z.string().array(),
});

// ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’æ‰±ã†ã‚¹ã‚­ãƒ¼ãƒ
const UserSchema = RootStoreSchemas.omit({ tasks: true });

// ã‚¿ã‚¹ã‚¯æƒ…å ±ã‚’æ‰±ã†ã‚¹ã‚­ãƒ¼ãƒ
const TaskSchema = RootStoreSchemas.omit({ name: true, age: true });
```

## .partial()

`.partial()`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†äº‹ã§ã€Object ã‚¹ã‚­ãƒ¼ãƒå†…ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å…¨ã¦ã‚’ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ã«å‡ºæ¥ã¾ã™ã€‚

```ts:.partial()ã®æŒ™å‹•ã®ç¢ºèª
const UserSchema = z.object({
  name: z.string(),
  age: z.number(),
  location: z.object({
    lat: z.number(),
    long: z.number(),
  })
})

// UserSchemaã‚’ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ã«ã—ãŸã‚¹ã‚­ãƒ¼ãƒ
const PartialUserSchema = UserSchema.partial();

type PartialUserType = z.infer<typeof PartialUserSchema>;
/*
  {
    name?: string | undefined;
    age?: number | undefined;
    location?: { lat: number; long: number } | undefined;
  }
*/
```

:::message
ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã€1 ãƒ¬ãƒ™ãƒ«ã®æ·±ã•ã¾ã§ã—ã‹ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ã«ã—ã¾ã›ã‚“ã€‚
æ·±ã„ãƒ¬ãƒ™ãƒ«ã¾ã§ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ã«ã—ãŸã„å ´åˆã¯ã€[`.deepPartial()`ã‚ªãƒ—ã‚·ãƒ§ãƒ³](<#.deeppartial()>)ã‚’ä½¿ç”¨ã—ã¦ä¸‹ã•ã„ã€‚
:::

#### ä½¿ã„ã©ã“ã‚

å…·ä½“çš„ãªä¾‹ã§è¨€ã†ã¨ã€æ›´æ–° API ã«é€ä¿¡ã™ã‚‹å€¤ã‚’æ¤œè¨¼ã™ã‚‹æ™‚ãªã©ã«å¤§å¤‰ä¾¿åˆ©ã§ã™ ğŸ‘‡

```ts:.partial()ã®æ´»ç”¨ä¾‹
// ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
// PartialUserSchemaãªã©ã¯ä¸Šè¨˜ã§å®šç¾©ã—ãŸãƒ¢ãƒ
const updateUser = async (values: PartialUserType) => {
  const updateValues = PartialUserSchema.parse(values); // å€¤ã‚’æ¤œè¨¼ã™ã‚‹

  /* -- ã“ã“ã§æ›´æ–°å‡¦ç†ã‚’ã™ã‚‹ -- */
}
```

## .deepPartial()

`.deepPartial()`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†äº‹ã§ã€Object ã‚¹ã‚­ãƒ¼ãƒå†…ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®æ·±ã„æ‰€ã¾ã§ã‚’ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ã«å‡ºæ¥ã¾ã™ã€‚

```ts:.deepPartial()ã®æŒ™å‹•ã®ç¢ºèª
const UserSchema = z.object({
  name: z.string(),
  age: z.number(),
  location: z.object({
    lat: z.number(),
    long: z.number(),
  })
})

// ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®æ·±ã„æ‰€ã¾ã§ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ã«ã—ãŸã‚¹ã‚­ãƒ¼ãƒ
const DeepPartialUserSchema = UserSchema.deepPartial();

type  DeepPartialUserType = z.infer<typeof DeepPartialUserSchema>;
/*
  {
    name?: string | undefined;
    age?: number | undefined;
    location?: {
      lat?: number | undefined;
      long?: number | undefined;
    } | undefined;
  }
*/
```

#### ä½¿ã„ã©ã“ã‚

åŸºæœ¬çš„ã«[`.partial()`ã‚ªãƒ—ã‚·ãƒ§ãƒ³](<#.partial()>)ã¨åŒã˜ã ã¨æ€ã„ã¾ã™ã€‚

## .passthrough()

`.passthrough()`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†äº‹ã§ã€æ¤œè¨¼çµæœã«ç„¡é–¢ä¿‚ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å«ã‚ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

è¨€è‘‰ã ã‘ã ã¨åˆ†ã‹ã‚Šã¥ã‚‰ã„ã¨æ€ã„ã¾ã™ã®ã§ã€ä»¥ä¸‹ã®ä¾‹ã§æŒ™å‹•ã‚’ç¢ºèªã—ã¦ãã ã•ã„ ğŸ‘‡

```ts:.passthrough()ã®æŒ™å‹•ã®ç¢ºèª
const UserSchema = z.object({ name: z.string() });

// é–¢ä¿‚ãªã„å€¤`age`ã‚’å«ã‚“ã å…¥åŠ›å€¤
const values = { name: "", age: 0 };

// ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æŒ™å‹•
const defaultParse = UserSchema.parse(values);
console.log(defaultParse); // { name: "" }

// .passthrough()ã®æŒ™å‹•
const passParse = UserSchema.passthrough().parse(values);
console.log(passParse); // { name: "", age: 0 }
```

## .strict()

`.strict()`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†äº‹ã§ã€æ¤œè¨¼æ™‚ã«ç„¡é–¢ä¿‚ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒã‚ã£ãŸå ´åˆã«æ¤œè¨¼å¤±æ•—ã™ã‚‹ã‚ˆã†ã«å‡ºæ¥ã¾ã™ã€‚

è¨€è‘‰ã ã‘ã ã¨åˆ†ã‹ã‚Šã¥ã‚‰ã„ã¨æ€ã„ã¾ã™ã®ã§ã€ä»¥ä¸‹ã®ä¾‹ã§æŒ™å‹•ã‚’ç¢ºèªã—ã¦ãã ã•ã„ ğŸ‘‡

```ts:.strict()ã®æŒ™å‹•ã®ç¢ºèª
const UserSchema = z.object({ name: z.string() });

const values = { name: "", age: 0 };

// ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æŒ™å‹•
UserSchema.parse(values); // âœ… æ¤œè¨¼ã«æˆåŠŸã—ã¾ã™

// .strict()ã®å ´åˆ
UserSchema.strict().parse(values); // âŒ æ¤œè¨¼ã«å¤±æ•—ã—ã¾ã™

// æˆåŠŸã•ã›ã‚‹ã«ã¯ç„¡é–¢ä¿‚ãªå€¤ã‚’é™¤å¤–ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
const { age, ...userValues } = values; // ç„¡é–¢ä¿‚ãªå€¤ã‚’é™¤å¤–ã™ã‚‹
UserSchema.strict().parse(userValues); // âœ… æ¤œè¨¼ã«æˆåŠŸã—ã¾ã™
```

## .strip()

`.strip()`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†äº‹ã§ã€æ¤œè¨¼æ™‚ã®æŒ™å‹•ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™ã“ã¨ãŒå‡ºæ¥ã¾ã™ ğŸ‘‡

```ts:.strip()ã®æŒ™å‹•ã®ç¢ºèª
const StrictUserSchema = z.object({ name: z.string() }).strict();

const values = { name: "", age: 0 };

StrictUserSchema.parse(values);         // âŒ æ¤œè¨¼ã«å¤±æ•—ã—ã¾ã™
StrictUserSchema.strip().parse(values); // âœ… æ¤œè¨¼ã«æˆåŠŸã—ã¾ã™
```

## .catchall()

`.catchall()`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†äº‹ã§ã€æ¤œè¨¼æ™‚ã®ç„¡é–¢ä¿‚ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æ¤œè¨¼ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ ğŸ‘‡

```ts:.catchall()ã®æŒ™å‹•ã®ç¢ºèª
const UserSchema = z.object({ name: z.string() }).catchall(z.number());

UserSchema.parse({ name: "", age: 0 });     // âœ… æ¤œè¨¼ã«æˆåŠŸã—ã¾ã™
UserSchema.parse({ name: "", age: false }); // âŒ æ¤œè¨¼ã«å¤±æ•—ã—ã¾ã™
```

æ³¨æ„ç‚¹ã¨ã—ã¦ã¯ã€`.catchall()`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§æ¤œè¨¼ã•ã‚ŒãŸãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ã€ç„¡é–¢ä¿‚ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨ã¯æ‰±ã‚ã‚Œãªããªã‚Šã¾ã™ã®ã§ã€`.passthrough()`ãƒ»`.strip()`ãƒ»`.strict()`ã§æ¤œçŸ¥ã™ã‚‹äº‹ãŒå‡ºæ¥ç„¡ããªã‚Šã¾ã™ã€‚

```ts:.catchall()ã®å½±éŸ¿ã«ã¤ã„ã¦ã®ä¾‹
const UserSchema = z.object({ name: z.string() }).catchall(z.number());

const values = { name: "", age: 0 };

// .strict()ã®å ´åˆ
const result = UserSchema.strict().parse(values); // âœ… æ¤œè¨¼ã«æˆåŠŸã—ã¾ã™
console.log(result); // { name: "", age: 0 }

// .passthrough()ã®å ´åˆ
const result2 = UserSchema.passthrough().parse(values); // âœ… æ¤œè¨¼ã«æˆåŠŸã—ã¾ã™
console.log(result2); // { name: "", age: 0 }

// .strip()ã®å ´åˆ
const result3 = UserSchema.strip().parse(values); // âœ… æ¤œè¨¼ã«æˆåŠŸã—ã¾ã™
console.log(result3); // { name: "", age: 0 }
```

# Union å‹(å…±ç”¨å‹)

Union å‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆã™ã‚‹ã«ã¯`z.union()`ã‚’ä½¿ã£ã¦å®šç¾©ã—ã¾ã™ã€‚å®Ÿè¡Œã™ã‚‹éš›ã¯å¼•æ•°ã« ZodType ã®ã¿ã‚’å«ã‚“ã é…åˆ—ã‚’æ¸¡ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```ts:Unionå‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©
import * as z from "zod";

z.union([z.string(), z.number()]);            // string | number
z.union([z.string().nullable(), z.number()]); // string | number | null

// ZodTypeã«è¢«ã‚ŠãŒã‚ã‚‹å ´åˆã¯çµ±åˆã•ã‚Œã¾ã™
z.union([z.string(), z.string()]); // string
```

ã¾ãŸã€`.or()`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç”¨ã„ã‚‹äº‹ã§ã€ä»–ã® ZodType ã«ä»˜éšã•ã›ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

```ts:.or()ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç”¨ã„ãŸä¾‹
const StrOrNum = z.string().or(z.number()); // string | number
```

# Intersection å‹(äº¤å·®å‹)

Intersection å‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆã™ã‚‹ã«ã¯`z.intersection()`ã‚’ä½¿ã£ã¦å®šç¾©ã—ã¾ã™ã€‚å®Ÿè¡Œã™ã‚‹éš›ã¯å¼•æ•°ã« ZodType ã®ã¿ã‚’å«ã‚“ã é…åˆ—ã‚’æ¸¡ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```ts:Intersectionå‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©
import * as z from "zod";

const a = z.union([z.number(), z.string()]);  // number | string
const b = z.union([z.number(), z.boolean()]); // number | boolean

z.intersection(a, b); // number
```

ã¾ãŸã€`.and()`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç”¨ã„ã‚‹äº‹ã§ã€ä»–ã® ZodType ã«ä»˜éšã•ã›ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

```ts:.and()ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç”¨ã„ãŸä¾‹
const MergeSchema = obj1.and(obj2); // { a: string } & { b: number }
```

æ³¨æ„ã¨ã—ã¦ã€å¤šãã®å ´åˆ 2 ã¤ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒãƒ¼ã‚¸ã™ã‚‹ãªã‚‰[`.merge()`ã‚ªãƒ—ã‚·ãƒ§ãƒ³]()ã‚’ä½¿ç”¨ã™ã‚‹äº‹ã‚’ã‚ªã‚¹ã‚¹ãƒ¡ã—ã¾ã™ã€‚Intersection å‹ã®ã‚¹ã‚­ãƒ¼ãƒã«ã¯ã€Object å‹ã®ä¾¿åˆ©ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ãªã©ãŒç„¡ã„ãŸã‚ã€ä»–ã®ã‚¹ã‚­ãƒ¼ãƒã¨ã®ç›¸æ€§ãŒã‚ã¾ã‚Šè‰¯ãã‚ã‚Šã¾ã›ã‚“ã€‚

# Enum å‹

Enum å‹ã®ã‚¹ã‚­ãƒ¼ãƒã«ã¯ã€`Zod enums`ã¨`Native enums`ã®äºŒã¤ç¨®é¡ãŒã‚ã‚Šã¾ã™ã€‚

## Zod enums

ã“ã®`Zod enums`ã¯ Zod ç‹¬è‡ªã®ãƒ¢ãƒã§ã™ãŒã€Enum å‹ã‚’å®šç¾©ã¾ãŸã¯æ¤œè¨¼ã™ã‚‹æ™‚ã«æ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

ã“ã® Zod ç‹¬è‡ªã® enum ã‚’å®šç¾©ã™ã‚‹ã«ã¯ã€`z.enum()`ã‚’ä½¿ã£ã¦å®šç¾©ã—ã¾ã™ã€‚
æ³¨æ„ã¨ã—ã¦ã€å¼•æ•°ã®å€¤ã«ã¯æ–‡å­—åˆ—ã®ã¿ã‚’å«ã‚“ã é…åˆ—ã‹ã¤ã€ç›´æ¥å€¤ã‚’æ¸¡ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ ğŸ‘‡

```ts:Zod enumsã®æŒ™å‹•ã®ç¢ºèª
import * as z from "zod"

z.enum(["Salmon", "Tuna", "Trout"]); // 'Salmon' | 'Tuna' | 'Trout'

// ä»¥ä¸‹ã®ã‚ˆã†ã«ã¯æ›¸ã‘ã¾ã›ã‚“ğŸ™…â€â™‚ï¸ğŸ™…â€â™€ï¸
const fish = ["Salmon", "Tuna", "Trout"];
z.enum(fish); // âŒ å‹ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™
```

ã¾ãŸã€`.enum`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç”¨ã„ã‚‹äº‹ã§ enum å€¤ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ãŒã§ãã€`.options`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†äº‹ã§ã€Tuple å‹ã«å¤‰æ›ã§ãã¾ã™ã€‚

```ts:Zod enumsã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ´»ç”¨ä¾‹
const FishEnum = z.enum(["Salmon", "Tuna", "Trout"]);

type FishType = typeof FishEnum.enum;
/*
  {
    Salmon: "Salmon",
    Tuna: "Tuna",
    Trout: "Trout",
  }
*/

// Enumã‚’Tupleã«å¤‰æ›ã™ã‚‹
type FishTuple = typeof FishEnum.options;
/*
  ["Salmon", "Tuna", "Trout"]
*/
```

## Native enums

`Native enums`ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã™ã‚‹ã«ã¯`z.nativeEnum()`ã‚’ä½¿ã£ã¦å®šç¾©ã—ã¾ã™ã€‚

ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®åˆ—æŒ™å‹ã«å¯¾ã—ã¦æ¤œè¨¼ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã¯ã€ã“ã¡ã‚‰ã‚’ä½¿ã†äº‹ã§å¯¾å¿œå¯èƒ½ã§ã™ã€‚

#### Numeric enums

```ts
enum Fruits {
  Apple,
  Banana,
}

const FruitEnum = z.nativeEnum(Fruits);
type FruitEnum = z.infer<typeof FruitEnum>; // Fruits

FruitEnum.parse(Fruits.Apple); // âœ… æ¤œè¨¼ã«æˆåŠŸã—ã¾ã™
FruitEnum.parse(Fruits.Banana); // âœ… æ¤œè¨¼ã«æˆåŠŸã—ã¾ã™
FruitEnum.parse(0); // âœ… æ¤œè¨¼ã«æˆåŠŸã—ã¾ã™
FruitEnum.parse(1); // âœ… æ¤œè¨¼ã«æˆåŠŸã—ã¾ã™
FruitEnum.parse(3); // âŒ æ¤œè¨¼ã«å¤±æ•—ã—ã¾ã™
```

#### String enums

```ts
enum Fruits {
  Apple = "apple",
  Banana = "banana",
  Cantaloupe = 0, // Numeric enumsã¨String enumsã¯ã€æ··åœ¨ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™
}

const FruitEnum = z.nativeEnum(Fruits);
type FruitEnum = z.infer<typeof FruitEnum>; // Fruits

FruitEnum.parse(Fruits.Apple); // âœ… æ¤œè¨¼ã«æˆåŠŸã—ã¾ã™
FruitEnum.parse(Fruits.Cantaloupe); // âœ… æ¤œè¨¼ã«æˆåŠŸã—ã¾ã™
FruitEnum.parse("apple"); // âœ… æ¤œè¨¼ã«æˆåŠŸã—ã¾ã™
FruitEnum.parse("banana"); // âœ… æ¤œè¨¼ã«æˆåŠŸã—ã¾ã™
FruitEnum.parse(0); // âœ… æ¤œè¨¼ã«æˆåŠŸã—ã¾ã™
FruitEnum.parse("Cantaloupe"); // âŒ æ¤œè¨¼ã«å¤±æ•—ã—ã¾ã™
```

#### Const enums

`as const`ã‚’ç”¨ã„ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚‚æ‰±ã†ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

```ts
const Fruits = {
  Apple: "apple",
  Banana: "banana",
  Cantaloupe: 3,
} as const;

const FruitEnum = z.nativeEnum(Fruits);
type FruitEnum = z.infer<typeof FruitEnum>; // "apple" | "banana" | 3

FruitEnum.parse("apple"); // âœ… æ¤œè¨¼ã«æˆåŠŸã—ã¾ã™
FruitEnum.parse("banana"); // âœ… æ¤œè¨¼ã«æˆåŠŸã—ã¾ã™
FruitEnum.parse(3); // âœ… æ¤œè¨¼ã«æˆåŠŸã—ã¾ã™
FruitEnum.parse("Cantaloupe"); // âŒ æ¤œè¨¼ã«å¤±æ•—ã—ã¾ã™
```

# Tuples å‹

Tuples å‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã™ã‚‹ã«ã¯`z.tuple()`ã‚’ä½¿ã£ã¦å®šç¾©ã—ã¾ã™ã€‚

å¼•æ•°ã«ã¯ ZodType ã®ã¿ã‚’å«ã‚“ã é…åˆ—ã—ã‹æ¸¡ã›ãªã„äº‹ã«æ³¨æ„ã—ã¦ãã ã•ã„ï¼
ã¾ãŸ`.items`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç”¨ã„ã‚‹äº‹ã§ã€è¦ç´ ã®ã‚¹ã‚­ãƒ¼ãƒã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹äº‹ãŒå‡ºæ¥ã¾ã™ ğŸ‘‡

```ts:Tupleså‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©
import * as z from "zod";

z.tuple([ z.string(), z.number() ]);            // [ string, number ]
z.tuple([ z.string(), z.number().nullable() ]); // [ string, number | null ]

// è¦ç´ ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å–å¾—
const ItemsSchema = z.tuple([ z.string(), z.number() ]).items;
type ItemsType = typeof ItemsSchema;
/*
  [ z.ZodString, z.ZodNumber ]
*/
```

# Optional å‹

Optional å‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã™ã‚‹ã«ã¯`z.optional()`ã‚’ä½¿ã£ã¦å®šç¾©ã—ã¾ã™ã€‚

```ts:Optionalå‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©
import * as z from "zod";

z.optional(z.string()); // string | undefined
```

`.optional()`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç”¨ã„ã‚‹äº‹ã§ã€ä»–ã® ZodType ã«ä»˜éšã•ã›ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚
ã¾ãŸ`.unwrap()`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç”¨ã„ã‚‹äº‹ã§ã€å…ƒã«æˆ»ã™ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

```ts:.options()ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç”¨ã„ãŸä¾‹
z.string().optional();          // string | undefined
z.string().optional().unwrap(); // string

// .unwrap()ãŒè¿”ã™ã‚¹ã‚­ãƒ¼ãƒã¯å…ƒã®ã‚¹ã‚­ãƒ¼ãƒã¨åŒã˜å€¤ã«ãªã‚Šã¾ã™
const StringSchema = z.string();
const OptionalString = StringSchema.optional();
OptionalString.unwrap() === StringSchema; // true
```

# Nullables å‹

Nullables å‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã™ã‚‹ã«ã¯`z.nullable()`ã‚’ä½¿ã£ã¦å®šç¾©ã—ã¾ã™ã€‚

```ts:Nullableså‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©
import * as z from "zod";

z.nullable(z.string()); // string | null
```

`.nullable()`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç”¨ã„ã‚‹äº‹ã§ã€ä»–ã® ZodType ã«ä»˜éšã•ã›ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚
ã¾ãŸ`.unwrap()`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç”¨ã„ã‚‹äº‹ã§ã€å…ƒã«æˆ»ã™ã“ã¨ãŒå‡ºæ¥ã¾ã™ ğŸ‘‡

```ts:.nullable()ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ç”¨ã„ãŸä¾‹
z.string().nullable();          // string | null
z.string().nullable().unwrap(); // string

// .unwrap()ãŒè¿”ã™ã‚¹ã‚­ãƒ¼ãƒã¯å…ƒã®ã‚¹ã‚­ãƒ¼ãƒã¨åŒã˜å€¤ã«ãªã‚Šã¾ã™
const StringSchema = z.string();
const NullableString = StringSchema.nullable();
NullableString.unwrap() === StringSchema; // true
```

# Records å‹

Records å‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã™ã‚‹ã«ã¯`z.record()`ã‚’ä½¿ã£ã¦å®šç¾©ã—ã¾ã™ã€‚

```ts
import * as z from "zod";

z.record(z.number()); // { [k: string]: number }
```

#### æ•°å€¤ã‚­ãƒ¼ã«é–¢ã—ã¦ã®æ³¨æ„

`z.record()`ã®ã‚­ãƒ¼ã®å‹ã¯ String å‹ã¨ãªã£ã¦ã„ã¾ã™ãŒã€ã“ã‚Œã‚’ Number å‹ã«ã—ãŸã„å ´åˆãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã—ã‹ã—ã€Zod ã¯ã“ã‚Œã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚

ç†ç”±ã¯ã€JavaScript ã¯ã™ã¹ã¦ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚­ãƒ¼ã‚’å†…éƒ¨ã®æ–‡å­—åˆ—ã«è‡ªå‹•çš„ã«ã‚­ãƒ£ã‚¹ãƒˆã™ã‚‹ãŸã‚ã‚µãƒãƒ¼ãƒˆã™ã‚‹æ„å‘³ãŒãªã„ãŸã‚ã§ã™ã€‚ä»¥ä¸‹ã®æŒ™å‹•ã‚’è¦‹ã‚Œã°åˆ†ã‹ã‚Šã‚„ã™ã„ã¨æ€ã„ã¾ã™ ğŸ‘‡

```ts:JavaScriptãŒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆKey
const testMap: { [k: number]: string } = {
  1: "one",
};

for (const key in testMap) {
  console.log(`${key}: ${typeof key}`); // prints: `1: string`
}
```

ä¸Šè¨˜ã®æŒ™å‹•ã‚ˆã‚Šã€æœ¬æ¥ Number å‹ã®`key`ãŒ`for..in`æ–‡å†…ã§ã¯ String å‹ã«å¤‰æ›ã•ã‚Œã¦ã„ã¾ã™ã€‚README.md ã«ã‚‚è¨€åŠãŒã‚ã‚Šã¾ã™ã®ã§ã€ä»¥ä¸‹å¼•ç”¨ã•ã›ã¦ã‚‚ã‚‰ã„ã¾ã™ã€‚

> Since Zod is trying to bridge the gap between static and runtime types, it doesn't make sense to provide a way of creating a record schema with numerical keys, since there's no such thing as a numerical key in runtime JavaScript.
> **è¦ç´„**
> Zod ã¯é™çš„ãªå‹ã¨ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã®å‹ã®ã‚®ãƒ£ãƒƒãƒ—ã‚’ç„¡ãã—ãŸã„ã®ã§ã€Number å‹ã®ã‚­ãƒ¼ã¯ã‚µãƒãƒ¼ãƒˆã—ã¾ã›ã‚“ã€‚

# Maps å‹

Maps å‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã™ã‚‹ã«ã¯`z.map()`ã‚’ä½¿ã£ã¦å®šç¾©ã—ã¾ã™ã€‚

```ts:Mapså‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©
import * as z from "zod";

z.map(z.string(), z.number()); // Map<string, number>
```

Map ã®è©³ç´°ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®ã‚µã‚¤ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„ ğŸ‘‡

https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Map

# Sets å‹

Sets å‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã™ã‚‹ã«ã¯`z.set()`ã‚’ä½¿ã£ã¦å®šç¾©ã—ã¾ã™ã€‚

```ts:Setså‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©
import * as z from "zod";

z.set(z.string()); // Set<string>
```

Set ã®è©³ç´°ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®ã‚µã‚¤ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„ ğŸ‘‡

https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Set

# Function å‹

Function å‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆã™ã‚‹ã«ã¯`z.function()`ã‚’ä½¿ã£ã¦å®šç¾©ã—ã¾ã™ãŒã€ã“ã¡ã‚‰ã® ZodType ã¯é–¢æ•°ã‚’æ¤œè¨¼ã™ã‚‹ãƒ¢ãƒã§ã¯ãªãã€é–¢æ•°ã®å…¥åŠ›ã¨å‡ºåŠ›ã‚’æ¤œè¨¼ã™ã‚‹ãƒ¢ãƒã¨ãªã£ã¦ã„ã¾ã™ã€‚

ãã®ãŸã‚ã€ä»–ã® ZodType ã®ã‚ˆã†ã«`.parse()`ã‚’ä½¿ç”¨ã™ã‚‹ã®ã§ã¯ãªãã€`.implement()`ã‚’ç”¨ã„ã¦é–¢æ•°ã‚’å®šç¾©ã™ã‚‹éš›ã«ä½¿ç”¨ã—ã¾ã™ã€‚

```ts
import * as z from "zod";

// ã‚¹ã‚­ãƒ¼ãƒã®å®šç¾©æ–¹æ³•
z.function(); // () => unknown
z.function().args(z.number()); // (args_0: number) => unknown
z.function().returns(z.boolean()); // () => boolean

// ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚‚å®šç¾©ã§ãã¾ã™ã€‚
const returnSchema = z.string();
const argsSchema = z.tuple([z.number(), z.number()]);

z.function(argsSchema, returnSchema);
// (args_0: string, args_1: number) => string

// ã‚¹ã‚­ãƒ¼ãƒãŒä½•ã‚‚è¿”ã•ãªã„äº‹ã‚’ç¤ºã™ã«ã¯z.void()ã‚’ä½¿ç”¨ã—ã¾ã™
z.function().returns(z.void()); // () => void

// Functionã‚¹ã‚­ãƒ¼ãƒã‚’ä½¿ã£ã¦é–¢æ•°ã‚’å®šç¾©ã™ã‚‹
const add = z
  .function()
  .args(z.number(), z.number())
  .returns(z.number())
  .implement((a, b) => {
    return a + b; // a,bã¯æ¤œè¨¼æ¸ˆã¿ã®å€¤
  });

add(1, 2); // âœ… å®Ÿè¡Œã§ãã‚‹
add("1", 2); // âŒ æ¤œè¨¼ã«å¤±æ•—ã—ã¦ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™
```

ä¸Šè¨˜ã®`add()`ã‚ˆã†ã« Function ã‚¹ã‚­ãƒ¼ãƒã‚’ä½¿ã£ã¦é–¢æ•°ã‚’å®Ÿè£…ã™ã‚‹äº‹ã§ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¾Œã® JavaScript ã§ã‚‚å‹ã®æ•´åˆæ€§ã‚’ä¿ã¤ã“ã¨å‡ºæ¥ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€æ¤œè¨¼ã‚³ãƒ¼ãƒ‰ã¨ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ··åŒã™ã‚‹ã“ã¨ãªãã€é–¢æ•°ã®å…¥åŠ›ã¨å‡ºåŠ›ã‚’ç°¡å˜ã«æ¤œè¨¼ã§ãã¦ã„ã¾ã™ã€‚

ã¾ãŸã€å¼•æ•°ã‚„è¿”ã‚Šå€¤ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å–å¾—ã™ã‚‹äº‹ã‚‚ã§ãã¾ã™ ğŸ‘‡

```ts
const FuncSchema = z
  .function()
  .args(z.string(), z.number())
  .returns(z.boolean());

// ã‚¹ã‚­ãƒ¼ãƒã®å‹ã®ç¢ºèª
type FuncType = z.infer<typeof FuncSchema>;
// (arg0: string, arg1: number) => boolean

// å¼•æ•°ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å–å¾—
FuncSchema.parameters(); // ZodTuple<[ZodString, ZodNumber]>

// è¿”ã‚Šå€¤ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å–å¾—
FuncSchema.returnType(); // ZodBoolean
```

# Promise å‹

Promise å‹ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã™ã‚‹ã«ã¯`z.promise()`ã‚’ç”¨ã„ã¦å®šç¾©ã—ã¾ã™ã€‚

æ³¨æ„ç‚¹ã¨ã—ã¦ã€Promise å‹ã®ã‚¹ã‚­ãƒ¼ãƒã®`.parse()`ã¯ç‰¹åˆ¥ãªæŒ™å‹•ã‚’ã—ã¾ã™ã€‚
æ¤œè¨¼ã«ã¯ã€ä»¥ä¸‹ã® 2 ã¤ãŒè¡Œã‚ã‚Œã¾ã™ã€‚

1. å…¥åŠ›å€¤ãŒ Promise ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚( `.then()`ã‹`.catch()`ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ )
2. Zod ã¯`.then()`ã‚’ç”¨ã„ã¦ã€æ¤œè¨¼ã‚¹ãƒ†ãƒƒãƒ—ã‚’æ—¢å­˜ã® Promise ã«è¿½åŠ ã—ã¾ã™ã€‚

ä¸Šè¨˜ã‚’è¸ã¾ãˆã¦ã€ã‚¹ã‚­ãƒ¼ãƒã®å®šç¾©ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¾ã™ ğŸ‘‡

```ts
import * as z from "zod";

// Promiseã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©
const numberPromise = z.promise(z.number());

// âŒ å…¥åŠ›å€¤ãŒPromiseã§ãªã„ãŸã‚ã€æ¤œè¨¼ã«å¤±æ•—ã—ã¾ã™
numberPromise.parse(0); // ZodError: Non-Promise type: number

// Promiseã‚’è¿”ã—ã¾ã™( è¿”ã•ã‚ŒãŸPromiseå†…ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ )
numberPromise.parse(Promise.resolve("tuna")); // Promise<number>

// async/awiatã‚’ä½¿ã£ã¦æ¤œè¨¼ã§ãã¾ã™
const test = async () => {
  await numberPromise.parse(Promise.resolve("tuna"));
  // ZodError: Non-number type: string

  await numberPromise.parse(Promise.resolve(3.14));
  // => 3.14

  // æ¤œè¨¼å¤±æ•—æ™‚ã®çµæœã‚’å–å¾—ã™ã‚‹ã«ã¯`.catch()`ã‚’ä½¿ç”¨ã—ã¾ã™
  await numberPromise.parse("invalid").catch((errorResult) => {
    /* ... */
  });
};
```

# Recursive Types(å†å¸°å‹)

å†å¸°çš„ãªã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã™ã‚‹ã«ã¯`z.lazy()`ã‚’ç”¨ã„ã¦å®šç¾©ã—ã¾ã™ã€‚

æ³¨æ„ç‚¹ã¨ã—ã¦ã€TypeScript ã®åˆ¶é™ã«ã‚ˆã‚Šã‚¹ã‚­ãƒ¼ãƒã®å‹ã‚’é™çš„ã«æ¨æ¸¬ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ãã®ãŸã‚ã€å‹ã‚’æ‰‹å‹•ã§å®šç¾©ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ ğŸ‘‡

```ts:å†å¸°çš„ãªã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©
import * as z from "zod";

interface Category {
  name: string;
  subcategories: Category[];
}

// cast to z.ZodSchema<Category>
const CategorySchema: z.ZodSchema<Category> = z.lazy(() =>
  z.object({
    name: z.string(),
    subcategories: z.array(CategorySchema),
  })
);

CategorySchema.parse({
  name: "People",
  subcategories: [
    {
      name: "Politicians",
      subcategories: [{ name: "Presidents", subcategories: [] }],
    },
  ],
}); // âœ… æ¤œè¨¼ã«æˆåŠŸã—ã¾ã™
```

## JSON Type

JSON ã®å€¤ã‚’æ¤œè¨¼ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ã‚¹ãƒ‹ãƒšãƒƒãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚

```ts
type Literal = boolean | null | number | string;
type Json = Literal | { [key: string]: Json } | Json[];
const literalSchema = z.union([z.string(), z.number(), z.boolean(), z.null()]);
const jsonSchema: z.ZodSchema<Json> = z.lazy(() =>
  z.union([literalSchema, z.array(jsonSchema), z.record(jsonSchema)])
);

jsonSchema.parse(data);
```

:::message
[å¾ªç’°ãƒ‡ãƒ¼ã‚¿](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Errors/Cyclic_object_value)ã‚’ Zod ã«æ¸¡ã—ãŸå ´åˆã€ç„¡é™ãƒ«ãƒ¼ãƒ—ãŒç™ºç”Ÿã™ã‚‹äº‹ã«æ³¨æ„ã—ã¦ãã ã•ã„ï¼
:::

# Instanceof

`instanceof`æ¼”ç®—å­ã‚’ä½¿ã£ãŸã‚¹ã‚­ãƒ¼ãƒã‚‚ä½œã‚‹äº‹ãŒå¯èƒ½ã§ã™ã€‚`z.instanceof()`ã§ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã—ã¾ã™ ğŸ‘‡

```ts:instanceofã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©
import * as z from "zod";

class Test {
  name: string;
}

// instanceofã®ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆ
const TestSchema = z.instanceof(Test);

const blob: any = "whatever";
TestSchema.parse(new Test()); // âœ… æ¤œè¨¼ã«æˆåŠŸã—ã¾ã™
TestSchema.parse("blob");     // âŒ æ¤œè¨¼ã«å¤±æ•—ã—ã¾ã™
```

# Template Literal

`.custom()`ã‚’ç”¨ã„ã‚‹äº‹ã§ã€TypeScript ã®[Template Literal](https://www.typescriptlang.org/docs/handbook/2/template-literal-types.html)ã‚’æ‰±ã†ã“ã¨ãŒã§ãã¾ã™ã€‚
ä»¥ä¸‹ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯ã€[Issue](https://github.com/colinhacks/zod/issues/419)ã®å›ç­”ã®å¼•ç”¨ã§ã™ ğŸ‘‡

```ts:Issueã‚ˆã‚Šå¼•ç”¨
const literal = z.custom<`${number}.${number}.${number}`>((val) =>
  /^\d+\.\d+\.\d+$/g.test(val as string)
);
```

# Custom Validation

ç‹¬è‡ªã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…ã—ãŸã„å ´åˆã¯ã€`.refine()`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†äº‹ã§å®šç¾©ã§ãã¾ã™ã€‚

```ts:ã‚«ã‚¹ã‚¿ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…ã™ã‚‹
import * as z from "zod";

// å…¥åŠ›å€¤ãŒanyã®å ´åˆ
z.any().refine(
  (value: any) => value === "hoge",
  (value: any) => ({ message: `${value} is not "hoge"` })
);

// å…¥åŠ›å€¤ãŒstringã®å ´åˆ
z.string().refine(
  (value: string) => value === "hoge",
  (value: string) => ({ message: `${value} is not "hoge"` })
);
```

:::message
`.refine()`ã®ç¬¬ä¸€å¼•æ•°ã«æ¸¡ã™é–¢æ•°å†…ã§ã¯ã€ã‚¨ãƒ©ãƒ¼ã‚’æŠ•ã’ãªã„ã‚ˆã†ã«ã—ã¦ä¸‹ã•ã„ï¼
ã‚¨ãƒ©ãƒ¼ã‚’æŠ•ã’ãŸå ´åˆã€`.refine()`ã¯ãã®ã‚¨ãƒ©ãƒ¼ã‚’ç„¡è¦–ã—ã¦æ¤œè¨¼ãŒæˆåŠŸã—ãŸã‚‚ã®ã¨æ‰±ã„ã¾ã™ã€‚
:::

## .superRefine()

`.refine()`ã§ã¯ä¸€ã¤ã®æ¤œè¨¼æƒ…å ±ã—ã‹è¿”ã›ã¾ã›ã‚“ã§ã—ãŸãŒã€`.superRefine()`ã‚’ä½¿ã†äº‹ã§è¤‡æ•°ã®æ¤œè¨¼æƒ…å ±ã‚’è¿”ã™ã“ã¨ãŒå‡ºæ¥ã¾ã™ ğŸ‘‡

```ts:.superRefine()ã®å®Ÿè£…ä¾‹
const Strings = z.array(z.string()).superRefine((val, ctx) => {

  // é…åˆ—ã®è¦ç´ æ•°ã‚’æ¤œè¨¼ã—ã¦ã€æ¤œè¨¼çµæœã‚’ç™»éŒ²ã™ã‚‹
  if (val.length > 3) {
    ctx.addIssue({
      code: z.ZodIssueCode.too_big,
      maximum: 3,
      type: "array",
      inclusive: true,
      message: "è¦ç´ ãŒå¤šã™ãã¾ã™ğŸ˜¡",
    });
  }

  // é…åˆ—è¦ç´ ã®é‡è¤‡ã‚’æ¤œè¨¼ã—ã¦ã€æ¤œè¨¼çµæœã‚’ç™»éŒ²ã™ã‚‹
  if (val.length !== new Set(val).size) {
    ctx.addIssue({
      code: z.ZodIssueCode.custom,
      message: "é‡è¤‡ã¯èªã‚ã‚‰ã‚Œã¾ã›ã‚“",
    });
  }
});
```

# å…±é€šã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦

ä¸Šè¨˜ã§è§£èª¬ã—ãŸ ZodType ã«ã¯å…±é€šã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚
ã“ã®ç¯€ã§ã¯ã€ãã‚Œã‚‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦è§£èª¬ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚

:::message
æ¤œè¨¼ç”¨ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³(é–¢æ•°)ãªã©ã¯ã€å¾Œè¿°ã™ã‚‹ãŸã‚çœã‹ã›ã¦é ‚ãã¾ã™ã€‚
:::

## .default()

ã‚¹ã‚­ãƒ¼ãƒã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¨­å®šã—ã¾ã™ã€‚

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¨­å®šã—ã¦ã„ã‚‹å ´åˆã¯ã€`undfined`ã‚’å…¥åŠ›å€¤ã¨ã—ã¦è¨±å®¹ã™ã‚‹äº‹ã«æ³¨æ„ã—ã¦ãã ã•ã„ï¼

```ts:.default()ã®ä½¿ç”¨ä¾‹
const schema = z.string().default("default value");

type SchemaType = z.infer<typeof schema>; // string

const result = schema.parse(void 0);
console.log(result); // "default value"

const result2 = schema.parse("hoge");
console.log(result2); // "hoge"
```

## .optional()

ã‚¹ã‚­ãƒ¼ãƒã®å…¥åŠ›å€¤ã«`undefined`ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```ts:.optional()ã®ä½¿ç”¨ä¾‹
const schema = z.string().optional();

type SchemaType = z.infer<typeof schema>; // string | undefined

const result = schema.parse(void 0);
console.log(result); // undefined

const result2 = schema.parse("hoge");
console.log(result2); // "hoge"
```

## .nullable()

ã‚¹ã‚­ãƒ¼ãƒã®å…¥åŠ›å€¤ã«`null`ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```ts:.optional()ã®ä½¿ç”¨ä¾‹
const schema = z.string().nullable();

type SchemaType = z.infer<typeof schema>; // string | null

const result = schema.parse(null);
console.log(result); // null

const result2 = schema.parse("hoge");
console.log(result2); // "hoge"
```

## .array()

ã‚¹ã‚­ãƒ¼ãƒã‚’ Array å‹ã«å¤‰æ›ã—ã¾ã™ã€‚

```ts:.optional()ã®ä½¿ç”¨ä¾‹
const schema = z.string().array();

type SchemaType = z.infer<typeof schema>; // string[]

const result = schema.parse([]);
console.log(result); // []

const result2 = schema.parse(["hoge"]);
console.log(result2); // ["hoge"]
```

Array å‹ã®è©³ç´°ã«ã¤ã„ã¦ã¯[å‰è¿°ã—ã¦ã‚ã‚Šã¾ã™](#arrayå‹)ã®ã§ã€ãã¡ã‚‰ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## .or()

ã‚¹ã‚­ãƒ¼ãƒã‚’ Union å‹ã«å¤‰æ›ã—ã¾ã™ã€‚

```ts:.optional()ã®ä½¿ç”¨ä¾‹
const schema = z.string().or( z.number() );

type SchemaType = z.infer<typeof schema>; // string | number

const result = schema.parse("hoge");
console.log(result); // "hoge"

const result2 = schema.parse(100);
console.log(result2); // 100
```

Union å‹ã®è©³ç´°ã«ã¤ã„ã¦ã¯[å‰è¿°ã—ã¦ã‚ã‚Šã¾ã™](<#unionå‹(å…±ç”¨å‹)>)ã®ã§ã€ãã¡ã‚‰ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## .and()

ã‚¹ã‚­ãƒ¼ãƒã‚’ Intersection å‹ã«å¤‰æ›ã—ã¾ã™ã€‚

```ts:.and()ã®ä½¿ç”¨ä¾‹
const a = z.union([z.number(), z.string()]);  // number | string
const b = z.union([z.number(), z.boolean()]); // number | boolean

a.and(b); // number
```

Intersection å‹ã®è©³ç´°ã«ã¤ã„ã¦ã¯[å‰è¿°ã—ã¦ã‚ã‚Šã¾ã™](<#intersectionå‹(äº¤å·®å‹)>)ã®ã§ã€ãã¡ã‚‰ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

# æ¤œè¨¼æ–¹æ³•ã«ã¤ã„ã¦

ã“ã®ç¯€ã§ã¯ã€æ¤œè¨¼ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³(é–¢æ•°)ã«ã¤ã„ã¦è§£èª¬ã—ãŸã„ã¨æ€ã„ã¾ã™ ğŸ—ƒ

## .parse()

`.parse()`ã‚’å®Ÿè¡Œã™ã‚‹äº‹ã§ã€å…¥åŠ›å€¤ãŒæœŸå¾…ã™ã‚‹å€¤ã‹ã‚’æ¤œè¨¼ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
æ¤œè¨¼æˆåŠŸæ™‚ã«ã¯ã€æ¤œè¨¼ã—ãŸå€¤( æœŸå¾…ã—ãŸå‹ã®å€¤ )ã‚’è¿”ã—ã€æ¤œè¨¼ã«å¤±æ•—ã—ãŸå ´åˆã¯ã‚¨ãƒ©ãƒ¼ãŒæŠ•ã’ã‚‰ã‚Œã¾ã™ ğŸ‘‡

```ts:.parse()ã®å®Ÿè¡Œä¾‹
import * as z from "zod";

// Stringå‹ã®ã‚¹ã‚­ãƒ¼ãƒ
const StringSchema = z.string();

StringSchema.parse("fish"); // âœ… æ¤œè¨¼ã«æˆåŠŸã—ã€"fish"ã‚’è¿”ã—ã¾ã™
StringSchema.parse(12);     // âŒ æ¤œè¨¼ã«å¤±æ•—ã—ã€ã‚¨ãƒ©ãƒ¼ãŒæŠ•ã’ã‚‰ã‚Œã¾ã™

// ã‚¨ãƒ©ãƒ¼æƒ…å ±ã‚’å—ã‘å–ã‚‹ã«ã¯try..catchæ–‡ã‚’ä½¿ã†å¿…è¦ãŒã‚ã‚Šã¾ã™
try {
  StringSchema.parse(true);
} catch(error) {
  console.error(error); // ZodError('Non-string type: boolean');
}
```

## .parseAsync()

`.refine()`ã‚„`.transform()`ã‚’ä½¿ã£ãŸéåŒæœŸã‚¹ã‚­ãƒ¼ãƒã‚’æ¤œè¨¼ã™ã‚‹å ´åˆã€`.parseAsync()`ã‚’ä½¿ã£ã¦æ¤œè¨¼ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```ts:.parseAsync()ã®å®Ÿè¡Œä¾‹
import * as z from "zod";

// éåŒæœŸã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆ
const HelloSchema = z.string().refine(async (val) => val === "hello");

(async () => {
  await HelloSchema.parseAsync("hello"); // âœ… æ¤œè¨¼ã«æˆåŠŸã—ã€"hello"ã‚’è¿”ã—ã¾ã™
  await HelloSchema.parseAsync("world"); // âŒ æ¤œè¨¼ã«å¤±æ•—ã—ã€ã‚¨ãƒ©ãƒ¼ãŒæŠ•ã’ã‚‰ã‚Œã¾ã™
})();
```

:::message
`.parseAsync()`ã®è¿”ã‚Šå€¤ã¯ã€Promise ã§ã‚ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ï¼
:::

## .safeParse()

ã‚¨ãƒ©ãƒ¼ã‚’æŠ•ã’ãšã«æ¤œè¨¼ã™ã‚‹ã«ã¯ã€`.safeParse()`ã‚’ä½¿ã†äº‹ã§æ¤œè¨¼ã§ãã¾ã™ã€‚

```ts:.safeParse()ã®å®Ÿè¡Œä¾‹
import * as z from "zod";

// Stringå‹ã®ã‚¹ã‚­ãƒ¼ãƒ
const StringSchema = z.string();

const result = StringSchema.safeParse("fish"); // âœ… æ¤œè¨¼ã«æˆåŠŸ
console.log(result); // { success: true, data: "fish" }

const result = StringSchema.safeParse(12); // âŒ æ¤œè¨¼ã«å¤±æ•—
console.log(result); // { success: false, data: ZodError }
```

æ¤œè¨¼çµæœã¯ã€Union å‹ã§ã‚ã‚‹ãŸã‚ä»¥ä¸‹ã®ã‚ˆã†ãªè¨˜è¿°ã§å‹æƒ…å ±ã‚’é©åˆ‡ã«é©ç”¨ã§ãã¾ã™ã€‚

```ts:
const result = stringSchema.safeParse("billie");
type ResultType = typeof result;
// { result: true; data: string } | { result: false; error: ZodError }

if (result.success === true) result.error;ã€€// ğŸ›‘ å‹ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™
if (result.success === false) result.data;ã€€// ğŸ›‘ å‹ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™
```

## .safeParseAsync()

`.refine()`ã‚„`.transform()`ã‚’ä½¿ã£ãŸéåŒæœŸã‚¹ã‚­ãƒ¼ãƒã§ã‚¨ãƒ©ãƒ¼ã‚’æŠ•ã’ãšã«æ¤œè¨¼ã™ã‚‹å ´åˆã€`.safeParseAsync()`ã‚’ä½¿ã£ã¦æ¤œè¨¼ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãŸã€ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã¨ã—ã¦`.spa()`ãŒã‚ã‚Šã¾ã™ã€‚

```ts:.safeParseAsync()ã®å®Ÿè¡Œä¾‹
import * as z from "zod";

// éåŒæœŸã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆ
const HelloSchema = z.string().refine(async (val) => val === "hello");

(async () => {
  const result = await HelloSchema.safeParseAsync("hello"); // âœ… æ¤œè¨¼ã«æˆåŠŸã—ã¾ã™
  console.log(result); // { success: true, data: "hello" }

  const result = await HelloSchema.safeParseAsync("world"); // âŒ æ¤œè¨¼ã«å¤±æ•—ã—ã¾ã™
  console.log(result); // { success: false, error: ZodError }
})();


// ä»¥ä¸‹ã®ã‚ˆã†ã«`.spa()`ã‚’ç”¨ã„ã¦ã‚‚åŒã˜ã§ã™
(async () => {
  const result = await HelloSchema.spa("hello"); // âœ… æ¤œè¨¼ã«æˆåŠŸã—ã¾ã™
  console.log(result); // { success: true, data: "hello" }

  const result = await HelloSchema.spa("world"); // âŒ æ¤œè¨¼ã«å¤±æ•—ã—ã¾ã™
  console.log(result); // { success: false, error: ZodError }
})();
```

# Transformer ã«ã¤ã„ã¦

Zod ã«ã¯ã€æ¤œè¨¼ã—ãŸå€¤ã‚’åˆ¥ã®å€¤ã«å¤‰æ›ã™ã‚‹`Transformer`ã¨ã„ã†æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚
ä»¥ä¸‹ã®ä¾‹ã§ã¯ã€æ–‡å­—åˆ—ã‚’æ•°å€¤ã«å¤‰æ›ã—ã¦ã„ã¾ã™ ğŸ‘‡

```ts:æ–‡å­—åˆ—ã‚’æ•°å€¤ã«å¤‰æ›ã—ã¦ä¾‹
import * as z from "zod";

// æ–‡å­—åˆ—ã‹ã‚‰æ•°å€¤ã¸å¤‰æ›ã™ã‚‹ã‚¹ã‚­ãƒ¼ãƒ
const stringToNumber = z.string().transform((val) => myString.length);

const result = stringToNumber.parse("string"); // âœ… æ¤œè¨¼ãŒæˆåŠŸã—ã¾ã™
console.log(result); // 6
```

:::message
`.transform()`å†…ã§ã¯ã€ã‚¨ãƒ©ãƒ¼ã‚’æŠ•ã’ãªã„ã‚ˆã†ã«ã—ã¦ä¸‹ã•ã„ã€‚
:::

### ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒ¼ãƒ³ã®é †ç•ªã«ã¤ã„ã¦

ä¸Šè¨˜ã®`stringToNumber`ã¯ã€`ZodEffects`ã®ã‚µãƒ–ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ï¼`z.string()`ã¨åŒã˜ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

ãã®ãŸã‚ã€`z.string()`ãŒæŒã¤`.email()`ãªã©ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’é©ç”¨ã™ã‚‹ã«ã¯`.transform()`ã‚’å®Ÿè¡Œã™ã‚‹å‰ã«å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```ts:æ–‡å­—åˆ—ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨.transform()ã‚’çµ„ã¿åˆã‚ã›ã‚‹
const emailToDomain = z
  .string()
  .email()
  .transform((val) => val.split("@")[1]);

const result = emailToDomain.parse("colinhacks@example.com");
console.log(result); // "example.com"

// âŒ ä»¥ä¸‹ã®ã‚ˆã†ãªæ›¸ãæ–¹ã¯å‡ºæ¥ã¾ã›ã‚“
const emailToDomain = z
  .string()
  .transform((val) => val.split("@")[1]) // è¿”ã™å€¤ã«.email()ãŒç„¡ã„ï¼
  .email();
```

### éåŒæœŸã® Transformer

`Transformer`ã‚’ä½¿ã£ã¦ã€éåŒæœŸã®å¤‰æ›å‡¦ç†ã‚’å®šç¾©ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ ğŸ‘‡

```ts:éåŒæœŸã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©
const IdToUser = z.string().uuid().transform(
  async (userId) => {
    return await getUserById(userId); // userIdã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã¸å¤‰æ›ã™ã‚‹
  }
);
```

:::message
ä¸Šè¨˜ã®ã‚¹ã‚­ãƒ¼ãƒã‚’æ¤œè¨¼ã™ã‚‹ã«ã¯[`.parseAsync()`](<#.parseasync()>)ãªã©ã‚’ä½¿ã†å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼
:::

### .refine()ã¨ã®é€£æº

[`.refine()`](<#.refine()>)ã‚’ä½¿ã†äº‹ã§å¤‰æ›å¾Œã®å€¤ã‚’æ¤œè¨¼ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ãŒã€ã“ã‚Œã¯ä¸Šè¨˜ã®éåŒæœŸçš„ã«å¤‰æ›ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’æ¤œè¨¼ã™ã‚‹æ™‚ã«ä¾¿åˆ©ãªãƒ¢ãƒã¨ãªã£ã¦ã„ã¾ã™ ğŸ‘‡

```ts:.refine()ã¨ã®é€£æºã™ã‚‹ä¾‹
// ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©
const UserSchema = z.object({
  id: z.string(),
  name: z.string(),
});

// ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã«å¤‰æ›ã™ã‚‹ã‚¹ã‚­ãƒ¼ãƒ
const IdToUser = UserSchema.shape.id.transform(
  async (userId) => {
    return await getUserById(userId); // userIdã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã¸å¤‰æ›ã™ã‚‹
  }
);

IdToUser
ã€€.refine(user => UserSchema.safeParse(user).success, "ä¸æ­£ãªãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã§ã™")
 .parse("example-user-id")
 .then(user => {
    console.log(user); // { id: "example-user-id", name: "example user" }
 })
```

:::message
`.refine()`ã®ç¬¬ä¸€å¼•æ•°ã«æ¸¡ã™é–¢æ•°å†…ã§ã¯ã€ã‚¨ãƒ©ãƒ¼ã‚’æŠ•ã’ãªã„ã§ãã ã•ã„ï¼
:::

ä¾‹ãˆã°ã€ä»¥ä¸‹ã®å‡¦ç†ã¯æ­£ã—ãæ¤œè¨¼ã§ãã¾ã›ã‚“ ğŸ‘‡

```ts:ãƒ€ãƒ¡ãªä¾‹
IdToUser
ã€€.refine(user => {

    // .parse()ã¯æ¤œè¨¼å¤±æ•—æ™‚ã«ã‚¨ãƒ©ãƒ¼ã‚’æŠ•ã’ã‚‹ãŒã€
    // .refine()ã¯ãã‚Œã‚’æ¤œçŸ¥ã—ãªã„ãŸã‚å¿…ãšæ¤œè¨¼ã«æˆåŠŸã—ã¦ã—ã¾ã†
    return UserSchema.parse(user)

  }, "ä¸æ­£ãªãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã§ã™")
```

# Error Handling ã«ã¤ã„ã¦

ã“ã®ç¯€ã§ã¯ã€æ¤œè¨¼å¤±æ•—æ™‚ã«è¿”ã•ã‚Œã‚‹ Error ã‚¯ãƒ©ã‚¹ã‚„ã€ãã®æ‰±ã„æ–¹ã«ã¤ã„ã¦è§£èª¬ã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ ğŸŒŒ

â€» åŸºæœ¬çš„ã«ä»¥ä¸‹ã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ã„ã¾ã™ ğŸ‘‡

https://github.com/colinhacks/zod/blob/master/ERROR_HANDLING.md

## ZodError

æ¤œè¨¼å¤±æ•—æ™‚ã€Zod ã¯[Error ã‚¯ãƒ©ã‚¹](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Error#custom_error_types)ã‚’ç¶™æ‰¿ã—ãŸ[ZodError ã‚¯ãƒ©ã‚¹](https://github.com/colinhacks/zod/blob/master/ERROR_HANDLING.md#zoderror)ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’è¿”ã—ã¾ã™ã€‚

ã“ã® ZodError ã«ã¯ã€æ¤œè¨¼ã®è©³ç´°æƒ…å ±ã‚’å«ã‚“ã `issues`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã€ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†äº‹ã§è©³ç´°ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’è¡Œã†äº‹ãŒå¯èƒ½ã§ã™ ğŸ‘‡

```ts
try {
  z.never().parse(1); // âŒ å¿…ãšæ¤œè¨¼ã«å¤±æ•—ã—ã¾ã™
} catch (zodError: z.ZodError) {
  // æ¤œè¨¼ã«å¤±æ•—ã—ãŸç†ç”±ã‚’ãƒ­ã‚°ã«è¡¨ç¤º
  console.error(zodError.issues);
  /*
    [
      {
        "code": "invalid_type", // æ¤œè¨¼ã‚¿ã‚¤ãƒ—( ã‚¿ã‚¤ãƒ—ä¸€è¦§ã¯ä¸‹è¨˜å‚ç…§ )
        "expected": "never",    // æœŸå¾…ã—ãŸå€¤ã®å‹
        "received": "number",   // å…¥åŠ›å€¤ã®å‹
        "path": [],             // ã‚¨ãƒ©ãƒ¼ç®‡æ‰€ã¸ã®ãƒ‘ã‚¹
        "message": "Expected never, received string" // ã‚¨ãƒ©ãƒ¼ã®è©³ç´°æ–‡
      },
      // ...
    ]
  */
}

// Zodã®ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ä¸€è¦§
type ZodIssueCode =
  | "invalid_type"
  | "custom"
  | "invalid_union"
  | "invalid_enum_value"
  | "unrecognized_keys"
  | "invalid_arguments"
  | "invalid_return_type"
  | "invalid_date"
  | "invalid_string"
  | "too_small"
  | "too_big"
  | "invalid_intersection_types";
```

`IssueCode`ã®è©³ç´°ãªèª¬æ˜ã¯ã€ä»¥ä¸‹ã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

https://github.com/colinhacks/zod/blob/v3/ERROR_HANDLING.md#zodissuecode

## ã‚¨ãƒ©ãƒ¼æ–‡ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã«ã¤ã„ã¦

ä¸€éƒ¨ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã¯ã€å¼•æ•°ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸã‚¨ãƒ©ãƒ¼æ–‡ã‚’æ¸¡ã™ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚
ä»¥ä¸‹ã«è¨­å®šã§ãã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ä¸€è¦§ã¨è¨­å®šæ–¹æ³•ã‚’è¼‰ã›ã¦ãŠãã¾ã™ã®ã§ã€å‚è€ƒã«ã—ã¦ä¸‹ã•ã„ ğŸ‘‡

```ts
import * as z from "zod";

// .refine()ã®è¨­å®šæ–¹æ³•
z.any().refine((input) => input, "hoge");
z.any().refine((input) => input, { message: "hoge" });
z.any().refine(
  (input) => input,
  (input) => ({ message: `${input} is not hoge` })
);

// z.string()ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³
z.string().min(5, "ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸã‚¨ãƒ©ãƒ¼æ–‡");
z.string().max(5, "ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸã‚¨ãƒ©ãƒ¼æ–‡");
z.string().length(5, "ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸã‚¨ãƒ©ãƒ¼æ–‡");
z.string().url({ message: "ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸã‚¨ãƒ©ãƒ¼æ–‡" });
z.string().uuid({ message: "ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸã‚¨ãƒ©ãƒ¼æ–‡" });
z.string().email({ message: "ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸã‚¨ãƒ©ãƒ¼æ–‡" });
z.string().nonempty({ message: "ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸã‚¨ãƒ©ãƒ¼æ–‡" });
z.string().regex(/.*/, { message: "ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸã‚¨ãƒ©ãƒ¼æ–‡" });

// z.number()ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³
z.number().min(5, "ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸã‚¨ãƒ©ãƒ¼æ–‡");
z.number().max(5, "ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸã‚¨ãƒ©ãƒ¼æ–‡");
z.number().int({ message: "ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸã‚¨ãƒ©ãƒ¼æ–‡" });
z.number().positive({ message: "ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸã‚¨ãƒ©ãƒ¼æ–‡" });
z.number().negative({ message: "ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸã‚¨ãƒ©ãƒ¼æ–‡" });
z.number().nonpositive({ message: "ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸã‚¨ãƒ©ãƒ¼æ–‡" });
z.number().nonnegative({ message: "ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸã‚¨ãƒ©ãƒ¼æ–‡" });

// z.array()ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³
z.array(z.any()).min(5, "ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸã‚¨ãƒ©ãƒ¼æ–‡");
z.array(z.any()).max(5, "ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸã‚¨ãƒ©ãƒ¼æ–‡");
z.array(z.any()).length(5, { message: "ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸã‚¨ãƒ©ãƒ¼æ–‡" });
```

## å‹ã‚¨ãƒ©ãƒ¼ãªã©ã®ã‚¨ãƒ©ãƒ¼æ–‡ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

å‹ã‚¨ãƒ©ãƒ¼ã‚„ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒãã‚‚ãã‚‚ãªã„ã‚¹ã‚­ãƒ¼ãƒã®ã‚¨ãƒ©ãƒ¼æ–‡ã‚’è¨­å®šã™ã‚‹ã«ã¯ã€`z.setErrorMap()`ã‚’ä½¿ã£ã¦ã‚¨ãƒ©ãƒ¼æ–‡ã‚’è¨­å®šã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ ğŸ‘‡

```ts
import * as z from "zod";

type ReturnValue = { message: string };
type Issue = Omit<z.ZodIssue, "message">;
type Context = { defaultError: string; data: any };

// ã‚¨ãƒ©ãƒ¼æƒ…å ±ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹é–¢æ•°
const customErrorMap = (issue: Issue, ctx: Context): ReturnValue => {
  // å‹æƒ…å ±ã§åˆ¤å®š
  if (issue.code === z.ZodIssueCode.invalid_type) {
    if (issue.expected === "string") {
      return { message: "æ–‡å­—åˆ—å‹ã§ã¯ã‚ã‚Šã¾ã›ã‚“" };
    }
  }

  if (issue.code === z.ZodIssueCode.custom) {
    // æ¤œè¨¼æ¡ä»¶ã§ã‚¨ãƒ©ãƒ¼æ–‡ã‚’ä½œæˆ
    return { message: `${(issue.params || {}).minimum}ä»¥ä¸‹ã§ã™` };
  }

  // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å€¤ã‚’è¿”ã™
  return { message: ctx.defaultError };
};

// customErrorMapã‚’è¨­å®šã™ã‚‹
z.setErrorMap(customErrorMap);
```

:::message
æ³¨æ„ç‚¹ã¨ã—ã¦ã€ä¸Šè¨˜ã®è¨­å®šã¯**å…¨ã¦ã®æ¤œè¨¼ã«åæ˜ ã•ã‚Œã¾ã™ï¼**
ãã®ãŸã‚ã€é–“é•ã£ã¦ä»–ã®ã‚¹ã‚­ãƒ¼ãƒã®ã‚¨ãƒ©ãƒ¼æ–‡ã‚’å¤‰æ›´ã—ã¦ã—ã¾ã†å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã®ã§ã€`z.setErrorMap()`ã«æ¸¡ã™é–¢æ•°ã«ã¯ãƒã‚°ãŒç„¡ã„ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚
:::

# å‹ç”Ÿæˆã«ã¤ã„ã¦

ZodType ã§ç”Ÿæˆã—ãŸã‚¹ã‚­ãƒ¼ãƒã‹ã‚‰ TypeScript ã®å‹ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ï¼
ä½¿ã„æ–¹ã¯ç°¡å˜ã§ã€`z.infer<>`ã®å‹å¼•æ•°ã«ã‚¹ã‚­ãƒ¼ãƒã®å‹ã‚’å…¥ã‚Œã‚‹ã ã‘ã§ç”Ÿæˆã§ãã¾ã™ï¼

```ts:z.infer<>ã®æŒ™å‹•ç¢ºèª
import * as z from "zod";

const A = z.string();
type A = z.infer<typeof A>; // string

const u: A = 12; // TypeError
const u: A = "asdf"; // compiles
```

## Transformer ã¨ã®å…¼ã­åˆã„

[Transformer]()ã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã€å…¥åŠ›å€¤ã¨å‡ºåŠ›å€¤ã®å‹æƒ…å ±ãŒé•ã†äº‹ãŒã‚ã‚Šã¾ã™ã€‚
ãã®ãŸã‚ã€`z.infer<>`ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæŒ™å‹•ã«ãªã‚‹äº‹ã«æ³¨æ„ã—ã¦ãã ã•ã„ ğŸ‘‡

```ts:Transformerã®å‹ç”Ÿæˆã®æŒ™å‹•
// string => number ã¸ã®å¤‰æ›ã‚¹ã‚­ãƒ¼ãƒ
const stringToNumber = z.string().transform(val => val.length)

// âš ï¸ z.infer ã¯å‡ºåŠ›å€¤ã®å‹ã‚’ç”Ÿæˆã—ã¾ã™ï¼
type type = z.infer<stringToNumber>; // number

// â„¹ï¸ å‡ºåŠ›å€¤ã®å‹ã‚’ç”Ÿæˆã™ã‚‹ã«ã¯z.outputã‚’ä½¿ç”¨ã—ã¾ã™
type out = z.output<stringToNumber>; // number, z.inferã¨åŒç­‰

// â„¹ï¸ å…¥åŠ›å€¤ã®å‹ã‚’ç”Ÿæˆã™ã‚‹ã«ã¯z.inputã‚’ä½¿ç”¨ã—ã¾ã™
type in = z.input<stringToNumber>; // string, å…¥åŠ›å€¤ã®å‹ã‚’ç”Ÿæˆã—ã¾ã™
```

## å‹å¼•æ•°ã®æ¸¡ã—æ–¹

Zod ã‚’æ®µéšçš„ã«å°å…¥ã—ãŸã„äººã§ã€`z.object()`ãªã©ã«æ—¢ã«ä½œæˆæ¸ˆã¿ã®å‹æƒ…å ±ã‚’`z.object<AnyType>()`ã®ã‚ˆã†ãªå‹å¼•æ•°ã«æ¸¡ã™æ„Ÿã˜ã§ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã—ãŸã„äººãŒå±…ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

ã“ã‚Œã‚’è¡Œã†ã«ã¯ã€`z.object()`ã«æ¸¡ã›ã‚‹ã‚ˆã†ã«ã™ã‚‹`toZod`ã‚’ä½œæˆã—ã¦ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¾ã™ ğŸ‘‡

```ts:z.object()ã«å‹æƒ…å ±ã‚’æ¸¡ã™
import * as z from "zod";

// zodã«æ¸¡ã›ã‚‹å‹ã«å¤‰æ›ã™ã‚‹å‹
type toZod<T extends Record<string, any>> = {
  [K in keyof T]-?: z.ZodType<T[K]>;
}

interface IHoge {
  hello: string;
  world: string;
}

// Hogeã‚’å‹å¼•æ•°ã¨ã—ã¦æ¸¡ã™
const HogeSchema = z.object<toZod<IHoge>>({
  hello: z.string(),
  world: z.string()
})
```

ã“ã‚Œã«ã‚ˆã‚Šã€`Hoge`ã®å¤‰æ›´å†…å®¹ã‚’`z.object()`ã«ä¼ãˆã‚‹äº‹ãŒå‡ºæ¥ã¾ã™ã€‚
ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ã«`Hoge`ã®è¦ç´ ã‚’å¤‰æ›´ã—ãŸå ´åˆã€`z.object()`å†…ã§å‹ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ã€‚

```ts:Hogeã®è¦ç´ ã‚’å¤‰æ›´ã™ã‚‹
import * as z from "zod";

// zodã«æ¸¡ã›ã‚‹å‹ã«å¤‰æ›ã™ã‚‹å‹
type toZod<T extends Record<string, any>> = {
  [K in keyof T]-?: z.ZodType<T[K]>;
}

interface IHoge {
  hello: string;
  // worldã‚’ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆ
  // world: string;
}

// Hogeã‚’å‹å¼•æ•°ã¨ã—ã¦æ¸¡ã™
const HogeSchema = z.object<toZod<IHoge>>({
  hello: z.string(),
  world: z.string() // âŒ å‹ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ï¼
})
```

# react-hook-form ã¨ã®é€£æº

ãƒ•ã‚©ãƒ¼ãƒ ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦æœ‰åãª [react-hook-form](https://react-hook-form.com/) ã¨ã®é€£æºãŒå¯èƒ½ã§ã™ã€‚
[å…¬å¼ README](https://github.com/react-hook-form/resolvers#zod)ã«ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ãŒã‚ã‚Šã¾ã—ãŸã®ã§ã€ä»¥ä¸‹ã«å¼•ç”¨ã—ã¾ã™ã€‚

```ts:å…¬å¼READMEã‚ˆã‚Šå¼•ç”¨ã—ãŸã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰
import React from 'react';
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import * as z from 'zod';

const schema = z.object({
  name: z.string().nonempty({ message: 'Required' }),
  age: z.number().min(10),
});

const App = () => {
  const {
    register,
    handleSubmit,
    formState: { errors },
  } = useForm({
    resolver: zodResolver(schema),
  });

  return (
    <form onSubmit={handleSubmit((d) => console.log(d))}>
      <input {...register('name')} />
      {errors.name?.message && <p>{errors.name?.message}</p>}
      <input type="number" {...register('age', { valueAsNumber: true })} />
      {errors.age?.message && <p>{errors.age?.message}</p>}
      <input type="submit" />
    </form>
  );
};

export default App;
```

# ã‚ã¨ãŒã

ä»¥ä¸Šã€ã“ã“ã¾ã§ Zod ã®åŸºæœ¬çš„ãªä½¿ã„æ–¹ã‹ã‚‰è©³ç´°ãªæŒ™å‹•ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¦ãã¾ã—ãŸã€‚

ã“ã®è¨˜äº‹ã§ Zod ã‚’çŸ¥ã‚‹äººãŒå¢—ãˆã‚‹æ©Ÿä¼šã‚’ä½œã‚ŒãŸã®ãªã‚‰æœ¬æœ›ã§ã™ã€‚

ã“ã‚ŒãŒèª°ã‹ã®å‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚
ã‚‚ã—è¨˜äº‹ã«é–“é•ã„ãªã©ãŒã‚ã‚Œã°ã€ã‚³ãƒ¡ãƒ³ãƒˆãªã©ã§æ•™ãˆã¦é ‚ã‘ã‚‹ã¨å¬‰ã—ã„ã§ã™ã€‚
ã“ã“ã¾ã§èª­ã‚“ã§ãã‚Œã¦ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ ğŸ™

ã•ã¦ã€ã“ã“ã‹ã‚‰ã¯ä½™è«‡ã§ã™ãŒã€TypeScript ã‚’æ€–ã„ã¨è¨€ã£ã¦ã„ãŸçŸ¥äººã«ã€ã“ã®è¨˜äº‹ã®è§£èª¬éƒ¨åˆ†ã®ã¿ã‚’è¦‹ã›ã¦ã¿ã¾ã—ãŸã€‚ã™ã‚‹ã¨ã©ã†ã§ã—ã‚‡ã†ã€ã€Œ ã‚ãƒ¼ã€æ€–ã„ã€æ€–ã„ ğŸ˜« ã€ã¨è¨€ã„ãªãŒã‚‰è¦‹ã‚‹ã®ã‚’æ–­ã‚‹ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã‹ï¼

ã¾ã•ã‹ã®åå¿œã«ã€ã€Œ ãˆã£ã€æœ¬å½“ã«æ€–ã„ã®ï¼Ÿ ã€ã¨çŸ¥äººã«å•ã†ã¨ã€

ã€Œ ã“ã‚“ãªã®èª°ã ã£ã¦ã€èª­ã‚€ã®æ€–ã„ã§ã—ã‚‡ã€‚ ã€

ã¨è¨€ã£ã¦ãã¾ã—ãŸã€‚

ã€Œ ãˆã£ã€æ€–ãã¯ãªã„ã§ã—ã‚‡ã€‚æŠ€è¡“è¨˜äº‹ãªã‚“ã ã—ã€‚æ€–ã„è¦ç´ ä¸€ã¤ã‚‚ãªããªã„ï¼Ÿ ã€

ã¨ç§ãŒè¨€ã†ã¨ã€çŸ¥äººãŒæ°—ä»˜ã„ã¦ç§ã«ã“ã†è¨€ã„ã¾ã—ãŸã€‚

ã€Œ ã‚ã‚Œï¼Ÿã‚‚ã—ã‹ã—ã¦ "**ã“ã‚ã„**" ã‚’ "**æ€–ã„**" ã¨å‹˜é•ã„ã—ã¦ãªã„ï¼Ÿ ã€
ã€Œ "**ã“ã‚ã„**" ã£ã¦ã„ã†ã®ã¯ã€"**ã ã‚‹ã„**" ã£ã¦ã„ã†æ„å‘³ã ã£ãŸã‚“ã ã‘ã©ã€‚ã€‚ã€‚ ã€

ãã‚Œã‚’èã„ã¦ã€ã€Œ ã‚ãƒ¼ã€ãªã‚‹ã»ã©ã€‚ã€ã¨ä»Šã¾ã§ã®é£Ÿã„é•ã„ã‚’ç†è§£ã—ã¾ã—ãŸã€‚

ãã®å¾Œè©±ã‚’èãã¨ã€ã€Œ ã“ã‚ã„ ã€ã¯åŒ—æµ·é“ã®æ–¹è¨€ã§ã€Œ ã ã‚‹ã„ãƒ»ç–²ã‚Œã‚‹ ã€ã¨è¨€ã†æ„å‘³ã«ãªã‚‹ãã†ã§ã€çŸ¥äººã¯ã€Œ ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦ä¸€ç•ªæ€–ã„ãƒ¢ãƒã¯ä½•ï¼Ÿ ã€ã¨è¨€ã†ç§ã®è³ªå•ã‚’ã€ã€Œ ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦ä¸€ç•ªç–²ã‚Œã‚‹ãƒ¢ãƒã¯ä½•ï¼Ÿ ã€ã¨è§£é‡ˆã—ã¦ç­”ãˆãŸã‚ˆã†ã§ã™ã€‚

ãã‚Šã‚ƒç¢ºã‹ã«ã€JavaScript ã«æ¯”ã¹ãŸã‚‰ TypeScript ã¯çµæ§‹ç–²ã‚Œã‚‹æ‰€ã¯ã‚ã‚Šã¾ã™ã‚ˆã­ ğŸ˜…

è§£é‡ˆã®é£Ÿã„é•ã„ã‚‚è§£æ±ºã—ãŸã¨ã“ã‚ã§ä¸€ä»¶è½ç€ï¼ãƒ»ãƒ»ãƒ»**ã§ã¯ã‚ã‚Šã¾ã›ã‚“ ğŸ˜¡**

ç§ã¯ã“ã®è¨˜äº‹ã‚’æ›¸ããŸã‚ã«ã€ä¼‘æ—¥ã®ã»ã¨ã‚“ã©ã‚’æ½°ã—ã¾ã—ãŸã€‚ãã‚Œãªã®ã«ã€ã“ã‚“ãªã‚ªãƒã§è¨±ã™ã»ã©ç§ã¯ãŠäººå¥½ã—ã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼

è…¹ã®è™«ãŒãŠã•ã¾ã‚‰ãªã„ç§ã¯ã€ä¸€çŸ¢å ±ã„ã‚‹ã¹ãçŸ¥äººã«å†åº¦å•ã„è³ªã—ã¾ã—ãŸã€‚

ã€Œ ãã‚Œã˜ã‚ƒã‚ã€æœ¬å½“ã«æ€–ã„ãƒ¢ãƒã£ã¦ä½•ï¼Ÿ ã€

ã™ã‚‹ã¨ã€çŸ¥äººãŒä¸€è¨€ã€‚

ã€Œ **ä¿ºã‚’æ€–ãŒã‚‰ã›ã‚ˆã†ã¨ã™ã‚‹ãŠå‰ã®è¡Œå‹•åŠ›ã«ã‚¾ãƒƒã¨ã—ã¨ã‚‹ã‚ã€‚** ã€

(Â´ãƒ»Ï‰ãƒ»ï½€) ...

ãã‚Œã§ã¯ã¾ãŸ ğŸ‘‹
